{"version":3,"sources":["app/data/data.tsx","utils/localstorage.tsx","themes/index.ts","scenes/info-panel/new-hint-giver.tsx","components/lil-face.tsx","utils/puzzler.tsx","app/board-slice.tsx","app/hooks.ts","scenes/board/board-controls.tsx","utils/index.tsx","app/ui-slice.tsx","scenes/board/position-controls.tsx","scenes/board/index.tsx","components/button.tsx","scenes/modal/modals/basic.tsx","scenes/modal/modals/winlose.tsx","scenes/modal/modals/debug.tsx","scenes/modal/modals/splash.tsx","scenes/modal/modals/progress.tsx","scenes/modal/modals/help.tsx","scenes/modal/index.tsx","scenes/main/rulemaster.tsx","components/speech-text.tsx","scenes/info-panel/hint-picker.tsx","scenes/info-panel/solved-notice.tsx","scenes/info-panel/index.tsx","scenes/main/index.tsx","App.tsx","app/store.ts","serviceWorker.ts","index.tsx"],"names":["LEVELMENU","title","levels","LEVELDATA","description","layout","attributeLabels","attributes","solution","hints","HINT_GIVERS","id","name","bodyType","idleImage","talkingImage","generatedGrids","getGridShape","size","gridShape","gsRow","gridRow","rowIdx","gsCol","push","generateGridShape","TUTORIAL","text","image","STORE_SCHEMA","LS_KEY","loadState","serializedState","localStorage","getItem","state","JSON","parse","board","storeSchema","console","log","gameStatus","e","saveSate","a","stringify","setItem","resetData","removeItem","document","location","reload","mixinFontFamily","style","css","createGlobalStyle","getColor","colorId","store","colors","brown_dark","brown","brown_light","black","grey_dark","grey","grey_light","white","pink","red_dark","red","red_light","green_dark","green","green_light","blue_dark","blue","blue_light","yellow_dark","yellow","yellow_light","purple","shadows","z1","z2","z3","breakpoints","mobile_tiny","mobile_medium","mobile_large","tablet","desktop","StyledHintGiver","styled","div","StyledLilManContainer","NewHintGiver","isTalking","hintGiver","align","useAppSelector","selectActiveHintGiver","useState","setBodyType","transition","setTransition","transitionTimer","useRef","startTransition","useCallback","current","global","setTimeout","useEffect","clearTimeout","className","hideFace","bodyClass","StyledLilManGif","p","imageUrl","LilFace","onClick","isCellSolution","answerSet","attrMatrix","filter","attrPair","length","initialState","cellMatrix","hintGivers","prevGameStatus","levelIdx","hintIdx","progression","gameReady","boardSlice","createSlice","reducers","resetMatrix","action","levelData","payload","resume","solutionSet","numAttributes","numValues","error","boxSize","Math","pow","newMatrix","idx","r","c","bi","xVal","floor","yVal","ansMatrix","isSolution","attrs","status","generateCellMatrix","forEach","hint","hIdx","foundIdx","findIndex","hg","getHintIdxById","random","rotateCell","nextStatus","getNextStatus","setActiveHint","submitAnswer","includes","setGameStatus","resumeLevel","startLevel","restartLevel","getNextLevelIdx","startNextLevel","actions","cellObj","getCellMatrix","getHintGivers","getActiveHintIdx","getGameStatus","getPrevGameStatus","getLevelIdx","getGameReady","getProgression","renderHint","hintGiverIdx","curIdx","selectLevelData","createSelector","selectLevelInfo","completed","level","selectAllLevelInfo","levelMenu","map","menuGroup","lId","selectHints","h","selectActiveHint","activeHintIdx","activeHint","selectAttributes","selectAttributeLabels","selectGridInfo","selectGridLabels","rowAttributes","colAttributes","rc","rows","labels","cols","selectGridBox","gridInfo","gridSize","row","rIdx","Array","_","cIdx","boxArr","i","selectSolution","selectRenderedSolution","vIdx","sIdx","selectAnsweredCells","cell","selectSolutionCells","checkIfSolved","answeredCells","solutionCells","numExpected","find","aC","useAppDispatch","useDispatch","useSelector","StyledButton","StyledSolvedButton","StyledHelpButton","StyledProgressButton","StyledContainer","BoardControls","solvedType","dispatch","onSubmitGame","forceWin","roundTo","num","decimals","round","clamp","min","max","zoom","zoomDelta","position","positionDelta","uiSlice","setZoom","setDeltaValues","setZoomDelta","releaseDeltas","setPosition","resetZoom","resetPosition","selectZoom","ui","selectPosition","StyledTouchInstructions","StyledZoomContainer","StyledPanContainer","StyledSlider","input","PanSliderY","startAvgCoords","startPinchDistance","PositionControls","isTouch","setIsTouch","onChangeZoom","target","value","onChangePositionX","onChangePositionY","onResetZoom","onResetPosition","onDocumentTouchMove","touches","pinchDistance","sqrt","clientX","clientY","avgCoords","deltaDiff","onDocumentTouchStart","onDocumentTouchEnd","addEventListener","window","navigator","maxTouchPoints","msMaxTouchPoints","useMemo","type","onChange","StyledBoardContainer","StyledBoard","StyledLeftLabels","StyledLeftLabel","StyledHeaderText","span","StyledLeftContainer","StyledLeftHeaders","StyledLeftHeader","StyledTopContainer","StyledTopHeaders","StyledTopHeader","StyledTopLabels","StyledTopLabel","StyledCells","StyledRawCellGroup","StyledCellGroup","cellRatio","StyledCell","BlankCellGroup","StyledControls","Board","grid","gridLabels","onClickCell","cellIdx","tStyles","transform","v","isLabel","toUpperCase","grIdx","cellGroup","cgIdx","cgKey","boardCell","gridColumn","renderCellGroup","label","glIdx","gl","StyledPositiveButton","StyledNegativeButton","StyledSpecialButton","StyledNeutralButton","Button","buttonType","StyledModalAbstract","StyledModalContainer","StyledModalHeader","StyledModalBody","ul","StyledModalFooter","WinModal","LoseModal","StyledSolution","DebugModal","renderedSolution","attr","rS","rSe","rSeIdx","SplashModal","textAlign","StyledBody","StyledLevelEntry","li","isEven","StyledCompleted","StyledGroupEntry","LevelGroupEntry","levelGroup","lI","LevelInfoEntry","data","ProgressModal","levelInfo","onStartLevel","StyledInstructions","StyledTutArrow","StyledPrevTut","StyledNextTut","StyledTutText","StyledTutorialImage","HelpModal","tutIdx","setTutIdx","tutData","tutIdxs","from","x","StyledModalBg","Modal","modal","getModal","RuleMaster","innerTimer","innerText","SpeechText","mdText","onTextComplete","delay","curText","setCurText","isComplete","setIsComplete","cleanText","replaceAll","nextTextPlease","fullText","reset","partial","slice","displayText","StyledHintHint","StyledHint","isActive","HintPicker","onCloseHint","onClickHint","slideInFromBottom","keyframes","fadeOut","StyledSolvedNotice","StyledCorrectNotice","StyledIncorrectNotice","SolvedNotice","StyledBanner","animateMarkdown","StyledTextZone","InfoPanel","setIsTalking","titleText","hintText","StyledWebsiteLink","Main","href","ScStage","App","routes","route","element","path","configureStore","reducer","boardReducer","uiReducer","preloadedState","Boolean","hostname","match","subscribe","throttle","getState","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.032ad0e0.chunk.js","sourcesContent":["import { HintGiver, RawCell, LevelData, LevelMenuGroup, TutorialData } from '../../types';\r\n\r\nexport const LEVELMENU: LevelMenuGroup[] = [\r\n  {\r\n    title: 'tutorial',\r\n    levels: [ 0 ]\r\n  },\r\n  {\r\n    title: 'easy',\r\n    levels: [ 1 ]\r\n  },\r\n  {\r\n    title: 'medium',\r\n    levels: [ 2, 3 ]\r\n  },\r\n  {\r\n    title: 'hard',\r\n    levels: [4]\r\n  }\r\n]\r\n/**\r\n * The attributes that defined the thingies this level\r\n */\r\nexport const LEVELDATA: LevelData[] = [\r\n  {\r\n    title: 'Basic Tutorial',\r\n    description: 'Goldilocks did some breaking and entering, now it\\'s time for soup.',\r\n    layout: '2x3',\r\n    attributeLabels: [\r\n      'bear',\r\n      'temperature'\r\n    ],\r\n    attributes: [\r\n      [ 'papa bear', 'mama bear', 'baby bear' ],\r\n      [ 'too hot', 'too cold', 'just right' ]\r\n    ],\r\n    solution:[\r\n      [ 0, 0 ],\r\n      [ 1, 1 ],\r\n      [ 2, 2 ]\r\n    ],\r\n    hints:[\r\n      ['The parent\\'s porridge wasn\\'t good enough for golidlocks.', 'face1'],\r\n      ['Mama bear eats her food straight from the fridge.', 'skull']\r\n    ],\r\n  },\r\n  {\r\n    title: 'Animals Doing People Jobs',\r\n    description: 'Three animals are looking for jobs.',\r\n    layout: '2x3',\r\n    attributeLabels: [\r\n      'animal',\r\n      'occupation'\r\n    ],\r\n    attributes: [\r\n      [ 'monkey', 'fish', 'frog' ],\r\n      [ 'firefighter', 'dentist', 'clown' ]\r\n    ],\r\n    solution:[\r\n      [ 0, 2 ], // monkey clown\r\n      [ 1, 0 ], // fish firefighter\r\n      [ 2, 1 ]  // frog dentist\r\n    ],\r\n    hints:[\r\n      ['The fish hopes they get to use that trampoline at least once.', 'skull'],\r\n      ['Everyone knows that clowns disintegrate when they touch water.', 'cactoid']\r\n    ],\r\n  },\r\n  {\r\n    title: 'Food Chain',\r\n    description: 'A hiker, a camper, and a birder wandered in the woods. So did some apex predators. Who got eaten by what?',\r\n    layout: '3x3',\r\n    attributeLabels: [\r\n      'person',\r\n      'eaten order',\r\n      'predator'\r\n    ],\r\n    attributes: [\r\n      [ 'hiker', 'camper', 'birder' ],\r\n      [ 'first meal', 'second feast', 'last dessert' ],\r\n      [ 'mountain lion', 'escaped tiger', 'bear' ]\r\n    ],\r\n    solution:[\r\n      [ 0, 2, 2 ], // hiker last bear \r\n      [ 1, 0, 0 ], // camper first lion \r\n      [ 2, 1, 1 ]  // birder second tiger\r\n    ],\r\n    hints:[ \r\n      ['The camper loved cats, well.. used to love cats.'],\r\n      ['The mountain lion ate before the tiger.'],\r\n      ['The hiker walked past a tiger with a huge belly.'],\r\n      ['The bird lover was eaten right after the camper.']\r\n    ],\r\n  },\r\n  {\r\n    title: 'Pirate Predicament',\r\n    description: 'A crew of pirates are trying to find the treasure they buried, they don\\'t even remember how they did it!',\r\n    layout: '3x4',\r\n    attributeLabels: [\r\n      'pirate',\r\n      'treasure',\r\n      'clue'\r\n    ],\r\n    attributes: [\r\n      [ 'Bluebeard', 'Carl the Skinless', 'Stank Tooth', 'Gravy Bones' ],\r\n      [ 'Gold Doubloons', 'Skull with Gold Teeth', 'Just an Old Boot', 'A Book of Curses' ],\r\n      [ 'Message in a Bottle', 'Treasure Map', 'Grog-induced Dream', 'A Sea Shanty' ]\r\n    ],\r\n    solution:[\r\n      [ 0, 2, 1 ],\r\n      [ 1, 3, 0 ],\r\n      [ 2, 1, 3 ],\r\n      [ 3, 0, 2 ]\r\n    ],\r\n    hints:[ \r\n      ['Bluebeard will not be happy with his treasure.', 'face1_pirate'],\r\n      [`The message in a bottle reads \"yarrrr read me treasure and ye skin will melt off. just speakin' from experience\".`, 'skull_pirate'],\r\n      ['Carl can\\'t read, fortunately for him.', 'face1_pirate'],\r\n      ['The valuable treasures were not written down.', 'skull_pirate'],\r\n      ['Gravy bones is always drunk, it finally did something good for him.', 'face1_pirate'],\r\n      ['Stank tooths treasure has to do with uh, teeth.', 'face1_pirate']\r\n    ],\r\n  },\r\n  {\r\n    title: 'What the Elf?',\r\n    description: 'Three elves made three toys for three different boys... last spring. These colorfully wrapped gifts don\\'t have labels, help santa figure this mess out',\r\n    layout: '4x3',\r\n    attributeLabels: [\r\n      'elf',\r\n      'toy',\r\n      'wrapping paper',\r\n      'kid'\r\n    ],\r\n    attributes: [\r\n      [ 'hermey', 'marcus', 'buddy' ],\r\n      [ 'train', 'fire engine', 'teddy bear' ],\r\n      [ 'red', 'silver', 'gold' ],\r\n      [ 'ralphie', 'charlie', 'kevin' ]\r\n    ],\r\n    solution:[\r\n      [ 2, 0, 1, 1 ],\r\n      [ 1, 2, 2, 0 ],\r\n      [ 0, 1, 0, 2 ]\r\n    ],\r\n    hints:[ \r\n      ['The train was wrapped in metallic wrapping paper.'],\r\n      ['Both Hermey and Buddy made toys with wheels.'],\r\n      ['Kevin wants to be a firefighter when he grows up.'],\r\n      ['Charlie asked for a train.'],\r\n      ['Marcus only uses gold wrapping paper.'],\r\n      ['Buddy made a gift for Charlie.'],\r\n    ],\r\n  },\r\n  {\r\n    title: '4 attributes, 4 values',\r\n    description: 'this puzzle has 4 attributes with 4 values. It doesnt work yet.',\r\n    layout: '4x4',\r\n    attributeLabels: [\r\n      'animal',\r\n      'order',\r\n      'emotion',\r\n      'occupation'\r\n    ],\r\n    attributes: [\r\n      [ 'monkey', 'frog', 'fish', 'crab' ],\r\n      [ 'first', 'second', 'third', 'last' ],\r\n      [ 'happy', 'angry', 'sad', 'bored' ],\r\n      [ 'firefighter', 'dentist', 'clown', 'lawyer' ]\r\n    ],\r\n    solution:[\r\n      [ 0, 0, 0, 0 ],\r\n      [ 1, 1, 1, 1 ],\r\n      [ 2, 2, 2, 2 ],\r\n      [ 3, 3, 3, 3 ]\r\n    ],\r\n    hints:[ \r\n      ['A hint needs to be created here'],\r\n      ['A hint needs to be created here'],\r\n      ['A hint needs to be created here'],\r\n      ['A hint needs to be created here']\r\n    ],\r\n  }\r\n]\r\n\r\nexport const HINT_GIVERS: HintGiver[] = [\r\n  {\r\n    id: 'skull',\r\n    name: 'Skull Guy',\r\n    bodyType: 'body1',\r\n    idleImage: 'assets/hinters/faces/skull-s.gif',\r\n    talkingImage: 'assets/hinters/faces/skull-t.gif',\r\n  },{\r\n    id: 'skull_pirate',\r\n    name: 'Skull Guy Pirate',\r\n    bodyType: 'body1',\r\n    idleImage: 'assets/hinters/faces/skull-pirate-s.gif',\r\n    talkingImage: 'assets/hinters/faces/skull-pirate-t.gif',\r\n  },{\r\n    id: 'cactoid',\r\n    name: 'Cactoid',\r\n    bodyType: 'body2',\r\n    idleImage: 'assets/hinters/faces/cactus-s.gif',\r\n    talkingImage: 'assets/hinters/faces/cactus-t.gif',\r\n  },{\r\n    id: 'face1',\r\n    name: 'Face 1',\r\n    bodyType: 'body3',\r\n    idleImage: 'assets/hinters/faces/face1-s.gif',\r\n    talkingImage: 'assets/hinters/faces/face1-t.gif',\r\n  },{\r\n    id: 'face1_pirate',\r\n    name: 'Face 1 Pirate',\r\n    bodyType: 'body3',\r\n    idleImage: 'assets/hinters/faces/face1-pirate-s.gif',\r\n    talkingImage: 'assets/hinters/faces/face1-pirate-t.gif',\r\n  }\r\n]\r\n\r\ntype GridShapeDef = {\r\n  [key: string]: RawCell[][]\r\n}\r\n\r\n\r\n/*\r\n  Making this stupid data structure that I wanna get rid of\r\n  its the row/column of each attribute\r\n  4 ->  [\r\n          [[0, 1], [ 0, 2 ], [ 0, 3 ]],\r\n          [[3, 1], [ 3, 2 ]],\r\n          [[2, 1]]\r\n        ],\r\n*/\r\nexport const generateGridShape = (size: number) => {\r\n  let gridShape = [];\r\n  for(let gsRow = 0; gsRow < size - 1; gsRow++){\r\n    let gridRow = [];\r\n    let rowIdx = gsRow === 0 ? 0 : size - gsRow;\r\n    for(let gsCol = 0; gsCol < size - 1 - gsRow; gsCol++){\r\n      gridRow.push([ rowIdx, gsCol + 1 ])\r\n    }\r\n    gridShape.push(gridRow);\r\n  }\r\n  return gridShape as RawCell[][];\r\n}\r\n\r\nconst generatedGrids: GridShapeDef = {};\r\nexport const getGridShape = (size:number) => {\r\n  if(!generatedGrids[size]){\r\n    generatedGrids[size] = generateGridShape(size);\r\n  }\r\n  return generatedGrids[size];\r\n}\r\n\r\nexport const TUTORIAL:TutorialData[] = [\r\n  {\r\n    text: 'Your goal is to use deductive logic to solve each puzzle.',\r\n    image: 'assets/hinters/faces/face1-t.gif'\r\n  },\r\n  {\r\n    text: 'Click the clues at the bottom of the screen to reveal information about the puzzle.',\r\n    image: 'assets/tutorials/clues-1.gif'\r\n  },\r\n  {\r\n    text: 'Using the information in the clue, click the grid cells to cycle between FALSE (red) and TRUE (green).',\r\n    image: 'assets/tutorials/buttons.gif'\r\n  },\r\n  {\r\n    text: 'Based on the provided clue, we can infer that mama and papa bear did not have porridge that was \"just right\" for goldilocks.',\r\n    image: 'assets/tutorials/clues-2.gif'\r\n  },\r\n  {\r\n    text: 'Only one attribute per row can be TRUE (green), so when all of the other items are FALSE (red), you can fill in the remaining pieces.',\r\n    image: 'assets/tutorials/deduction.gif'\r\n  },\r\n  {\r\n    text: 'Some clues won\\'t give you a direct answer, you\\'ll have to understand the subtext in the hint.',\r\n    image: 'assets/tutorials/clues-3.gif'\r\n  },\r\n  {\r\n    text: 'Using deductive logic, you can solve the rest of the puzzle.',\r\n    image: 'assets/tutorials/deduction-2.gif'\r\n  },\r\n  {\r\n    text: 'After selecting all of the correct TRUE (green) tiles, click SUBMIT to see if you have the answer correct. FALSE (red) tiles are optional.',\r\n    image: 'assets/tutorials/solve-01.gif'\r\n  },\r\n  {\r\n    text: 'The puzzles will get bigger and more difficult. When using multiple rows and columns, use the grid to help figure it out!',\r\n    image: 'assets/tutorials/grid-deduction-1.gif'\r\n  },\r\n  {\r\n    text: 'Since \"HIKER\" is \"FIRST MEAL\" and not \"MOUNTAIN LION\", you can also mark false where \"MOUNTAIN LION\" intersects the \"FIRST MEAL\" column.',\r\n    image: 'assets/tutorials/grid-deduction-1.gif'\r\n  },\r\n  {\r\n    text: 'You can change levels and reset your progress using the \"PROGRESS\" button.',\r\n    image: 'assets/tutorials/progress.gif'\r\n  },\r\n  {\r\n    text: 'If the board doesn\\'t fit in your screen, use the zoom and pan controls to move it around. Click the labels to reset. If you\\'re using a mobile device, you can pan and zoom using two fingers.',\r\n    image: 'assets/tutorials/zoom-pan.gif'\r\n  }\r\n];","// pattern from https://dev.to/igorovic/simplest-way-to-persist-redux-state-to-localstorage-e67\r\n\r\n/* when changing redux store or save format, update from whatever epoch time it is\r\n   to invalidate older saves. prevents corrupting localStorage while its tied to loose\r\n   redux state\r\n*/\r\nexport const STORE_SCHEMA = 1669787298042;\r\n\r\nconst LS_KEY = 'state';\r\nexport const loadState = () => {\r\n  try {\r\n    const serializedState = localStorage.getItem(LS_KEY);\r\n    if(!serializedState) return undefined;\r\n    const state = JSON.parse(serializedState);\r\n    if(state.board.storeSchema !== STORE_SCHEMA) {\r\n      console.log('saved data does not match store schema, resetting');\r\n      return undefined;\r\n    }\r\n\r\n    // hack for now, force player to start a new level and reset some messy data\r\n    state.board.gameStatus = 'start';\r\n\r\n    return state;\r\n  } catch(e) {\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport const saveSate = async (state: any) => {\r\n  try {\r\n    const serializedState = JSON.stringify(state);\r\n    localStorage.setItem(LS_KEY, serializedState);\r\n  } catch(e) {\r\n    \r\n  }\r\n}\r\n\r\n// TODO see if this has async issues with redux\r\nexport const resetData = () => {\r\n  localStorage.removeItem(LS_KEY);\r\n  document.location.reload();\r\n}","import { createGlobalStyle, css } from \"styled-components\"\r\n\r\ntype FontStyle = 'button' | 'speech' | 'gameboard' | 'special';\r\nexport const mixinFontFamily = (style?: FontStyle) => {\r\n  switch(style){\r\n    case 'gameboard': return css`font-family: 'Overpass', sans-serif`;\r\n    case 'speech': return css`font-family: 'Special Elite', cursive`;\r\n    case 'button': return css`font-family: 'Chakra Petch', sans-serif`;\r\n    case 'special': return css`font-family: 'Special Elite', cursive`;\r\n    default: return css`font-family: 'Chakra Petch', sans-serif`;\r\n  }\r\n}\r\n/*\r\nfont-family: 'Chakra Petch', sans-serif;\r\nfont-family: 'Overpass', sans-serif;\r\nfont-family: 'Special Elite', cursive; // speech\r\n\r\nfont-family: 'Anybody', cursive;\r\nfont-family: 'Dosis', sans-serif;\r\nfont-family: 'Jura', sans-serif;\r\nfont-family: 'Orbitron', sans-serif;\r\nfont-family: 'Overpass Mono', monospace; // speech\r\n*/\r\nexport default createGlobalStyle`\r\n  *{\r\n    margin: 0;\r\n    padding: 0;\r\n    outline:0;\r\n    box-sizing:border-box;\r\n\r\n    -webkit-touch-callout: none; /* iOS Safari */\r\n    -webkit-user-select: none; /* Safari */\r\n     -khtml-user-select: none; /* Konqueror HTML */\r\n       -moz-user-select: none; /* Old versions of Firefox */\r\n        -ms-user-select: none; /* Internet Explorer/Edge */\r\n            user-select: none; /* Non-prefixed version, currently\r\n                                  supported by Chrome, Edge, Opera and Firefox */\r\n  }\r\n  #root{\r\n    margin:0 auto;\r\n  }\r\n  h1{\r\n    font-size: 5rem;\r\n  }\r\n  h2{\r\n    font-size: 4rem;\r\n  }\r\n  h3{\r\n    font-size: 3.5rem;\r\n  }\r\n  h4{\r\n    font-size: 2.5rem;\r\n  }\r\n  h5{\r\n    font-size: 2rem;\r\n    line-height: 2rem;\r\n  }\r\n  p, span{\r\n    font-size:2rem;\r\n    line-height: 2rem;\r\n  }\r\n\r\n  html{\r\n    font-size: 62.5%;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    ${mixinFontFamily()};\r\n    background-color: black;\r\n  }\r\n`\r\n\r\n\r\n\r\nexport const listColors = () => {\r\n  return Object.keys(store.colors);\r\n}\r\n\r\n\r\nexport const getColor = (colorId: tColor) => {\r\n  return store.colors[colorId] as CssString; \r\n}\r\n\r\nexport const getShadow = (shadowId: tShadow) => {\r\n  return store.shadows[shadowId] as CssString;\r\n}\r\n\r\nexport const getBreakpoint = (breakpointId: tBreakpoint) => {\r\n  return store.breakpoints[breakpointId] as CssString;\r\n}\r\n\r\ntype CssString = string;\r\n\r\ntype tShadow = 'z1' | 'z2' | 'z3';\r\nconst shadows = {\r\n  z1: '-0.1rem 0.1rem .25rem .1rem rgba(0,0,0,0.16)',\r\n  z2: '-0.1rem 0.1rem .25rem .1rem rgba(0,0,0,0.36)',\r\n  z3: '-.2rem .5rem 1rem .2rem rgba(0,0,0,.36)'\r\n}\r\ntype tColor = 'brown_dark' | 'brown' | 'brown_light' | 'black' | 'grey_dark' | 'grey' | 'grey_light' | 'white' | 'pink' | 'red_dark' | 'red' | 'red_light' | 'blue_dark' | 'blue' | 'blue_light' | 'green_dark' | 'green' | 'green_light' | 'yellow_dark' | 'yellow' | 'yellow_light' | 'purple';\r\nconst colors = {\r\n  brown_dark: '#35120e',\r\n  brown: '#6b2b15',\r\n  brown_light: '#d48e55',\r\n  black: '#07070e',\r\n  grey_dark: '#1a1932',\r\n  grey: '#424c6e',\r\n  grey_light: '#92a1b9',\r\n  white: '#f7ede3',\r\n  pink: '#f29caa',\r\n  red_dark: '#7b102b',\r\n  red: '#b3102b',\r\n  red_light: '#e35970',\r\n  green_dark: '#123f1d',\r\n  green: '#33984b',\r\n  green_light: '#5ac54f',\r\n  blue_dark: '#003f61',\r\n  blue: '#1c638d',\r\n  blue_light: '#7ecbed',\r\n  yellow_dark: '#666a15',\r\n  yellow: '#afb224',\r\n  yellow_light: '#cfd14d',\r\n  purple: '#9c3d95',\r\n}\r\n\r\ntype tBreakpoint = 'mobile_tiny' | 'mobile_medium' | 'mobile_large' | 'tablet' | 'desktop';\r\nconst breakpoints = {\r\n  mobile_tiny: '300px',\r\n  mobile_medium: '400px',\r\n  mobile_large: '500px',\r\n  tablet: '768px',\r\n  desktop: '1024px'\r\n}\r\n\r\ntype ThemeStore = {\r\n  colors: typeof colors,\r\n  shadows: typeof shadows,\r\n  breakpoints: typeof breakpoints\r\n}\r\n\r\nexport const store: ThemeStore = {\r\n  colors: colors,\r\n  shadows: shadows,\r\n  breakpoints: breakpoints\r\n}\r\n","import styled from 'styled-components';\r\n\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport { LilFace } from '../../components/lil-face';\r\nimport { selectActiveHintGiver } from '../../app/board-slice';\r\nimport { getColor } from '../../themes';\r\nimport { useCallback, useEffect, useRef, useState } from 'react';\r\n\r\n\r\nconst StyledHintGiver = styled.div`\r\n  position:absolute;\r\n  bottom:-1rem;\r\n  width:100%;\r\n  height:100%;\r\n  left:10%;\r\n  transition: width .25s ease-in, height .5s ease-in-out, left 1s ease-out, background-color .5s, color .5s, border-radius .5s;\r\n  border-radius: 3rem 3rem 0 0;\r\n\r\n  &.hg-body1, &.hg-body2, &.hg-body3 {\r\n\r\n    >div{\r\n      opacity: 1;\r\n      transition: opacity .25s;\r\n      transition-delay: .25s;\r\n      >div{\r\n        width:100%;\r\n        height:100%;\r\n        transition: width .25s cubic-bezier(0.6, 1.47, 1, 1.06), height .25s cubic-bezier(0.6, 1.47, 1, 1.06);\r\n        transition-delay: .25s;\r\n      }\r\n    }\r\n  }\r\n\r\n  &.hg-none{\r\n    background-color: ${getColor('brown')};\r\n    border: var(--bordersize) solid ${getColor('brown_light')};\r\n    height: 5rem;\r\n    width: 80%;\r\n    left: 10%;\r\n  }\r\n\r\n  &.hg-body1 {\r\n    background-color: ${getColor('brown_dark')};\r\n    border: var(--bordersize) solid ${getColor('brown')};\r\n    height: 60%;\r\n    width: 90%;\r\n    left: 5%;\r\n  }\r\n\r\n  &.hg-body2 {\r\n    background-color: ${getColor('green_dark')};\r\n    border: var(--bordersize) solid ${getColor('green')};\r\n    border-radius: var(--bordersize) 12rem 0 0;\r\n    height: 100%;\r\n    width: 70%;\r\n    left: 15%;\r\n  }\r\n\r\n  &.hg-body3 {\r\n    border-radius: var(--roundedradius) var(--roundedradius) 0 0;\r\n    background-color: ${getColor('brown')};\r\n    border: var(--bordersize) solid ${getColor('brown_light')};\r\n    height: 90%;\r\n    width: 80%;\r\n    left: 10%;\r\n  }\r\n\r\n  &.transitioning {\r\n    >div{\r\n      opacity: 0;\r\n      transition: opacity 0s;\r\n\r\n      >div{\r\n        width:50%;\r\n        height:50%;\r\n        transition: width 0s, height 0s;\r\n        transition-delay: 0s;\r\n      }\r\n    }\r\n  }\r\n\r\n`;\r\n\r\nconst StyledLilManContainer = styled.div`\r\n  position: absolute;\r\n  width:100%;\r\n  height:100%;\r\n  left:50%;\r\n  top:50%;\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\ninterface HintGiverProps {\r\n  isTalking?: boolean,\r\n  align?: 'bottom' | 'top'\r\n}\r\n\r\n\r\nexport function NewHintGiver({ isTalking, align = 'bottom' }: HintGiverProps) {\r\n  const hintGiver = useAppSelector(selectActiveHintGiver);\r\n  const [ bodyType, setBodyType ] = useState('');\r\n  const [ transition, setTransition ] = useState(false);\r\n  const transitionTimer: { current: NodeJS.Timeout | null } = useRef(null);\r\n\r\n  const startTransition = useCallback(() => {\r\n    setTransition(true);\r\n    transitionTimer.current = global.setTimeout(() => {\r\n      setTransition(false);\r\n    }, 250);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if(hintGiver && hintGiver.bodyType){\r\n      if(bodyType !== hintGiver.bodyType){\r\n        setBodyType(hintGiver.bodyType);\r\n        startTransition();\r\n      }\r\n    }\r\n  }, [ hintGiver, bodyType, transition, startTransition ]);\r\n\r\n  useEffect(() => {\r\n    global.clearTimeout(transitionTimer.current as NodeJS.Timeout);\r\n  }, []);\r\n\r\n  if (!hintGiver || !bodyType) {\r\n    return (\r\n      <StyledHintGiver className={'hg-none'} >\r\n      </StyledHintGiver>\r\n    );\r\n  }\r\n\r\n  const hideFace = hintGiver.bodyType !== bodyType;\r\n  const bodyClass = transition ? `hg-${bodyType} transitioning` : `hg-${bodyType}`;\r\n\r\n  return (\r\n    <StyledHintGiver className={bodyClass} >\r\n      <StyledLilManContainer>\r\n        <LilFace\r\n          isTalking={isTalking}\r\n          hintGiver={hintGiver}\r\n          hideFace={hideFace}\r\n        />\r\n      </StyledLilManContainer>\r\n    </StyledHintGiver>\r\n  );\r\n}\r\n","import styled from 'styled-components';\r\nimport { HintGiver } from '../types';\r\n\r\nexport const ScButton = styled.div`\r\n  padding: 2rem;\r\n`;\r\n\r\ninterface StyledLilManProps {\r\n  imageUrl: string\r\n};\r\n\r\nexport const StyledLilManGif = styled.div<StyledLilManProps>`\r\n  position:absolute;\r\n  width:100%;\r\n  height:100%;\r\n  left:50%;\r\n  top:50%;\r\n  transform: translate(-50%, -50%);\r\n  bottom:-2rem;\r\n  background: url(${p => p.imageUrl}) no-repeat center;\r\n  background-position:center;\r\n  background-size:contain;\r\n`;\r\n\r\ninterface LilManProps {\r\n  hintGiver: HintGiver,\r\n  onClick?: Function,\r\n  isTalking?: boolean,\r\n  hideFace?: boolean\r\n}\r\n\r\nexport function LilFace({hintGiver, onClick, isTalking = false, hideFace}: LilManProps) {\r\n  // helps prevent showing images before transition is done\r\n  if(hideFace) return null;\r\n  return (\r\n    <StyledLilManGif\r\n      imageUrl={isTalking ? hintGiver.talkingImage : hintGiver.idleImage}\r\n      onClick={(e) => onClick && onClick(e)}\r\n    />\r\n  );\r\n}\r\n","import { getGridShape } from '../app/data/data';\r\nimport { SolutionSet, AttributeMatrix, CellObj, ComparisonHash, SimpleAttributeDef } from '../types';\r\n\r\n// make a hash of all unique attribute:attribute combinations\r\nexport const createComparisonHash = (numAttributes: number, numValues: number): ComparisonHash => {\r\n  const hash: ComparisonHash = {};\r\n  /**\r\n   * makes a flat hash of every unique attribute:value relationship to be used when script is iteratively\r\n   * \"solving\" to create hints. This can get quite large\r\n   * {\r\n   *  0:0|1:0,\r\n   *  0:0|1:1,\r\n   *  0:0|1:2,\r\n   *  0:0|2:0,\r\n   *  ...\r\n   * }\r\n   */\r\n  for(let i = 0; i < numAttributes-1; i++){\r\n    for(let j = 0; j < numValues; j++){\r\n      for(let k = i + 1; k < numAttributes; k++){\r\n        for(let l = 0; l < numValues; l++){\r\n          hash[`${i}:${j}|${k}:${l}`] = -1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return hash;\r\n}\r\n\r\n// answer set is the raw attributes (in order) and their values\r\n/// [1, 1, 1] would mean a valueIdx of 1 for attributes 0, 1, and 2\r\n\r\n// attrMatrix is a 2d array of attrIdx and numberIdx, so [[0,0],[2,0]] compares the 1st val of attr[0] with the 1st value of attr[2]\r\nexport const isCellSolution = (answerSet: SolutionSet, attrMatrix: AttributeMatrix) => {\r\n  for(let a = 0; a < answerSet.length; a++){\r\n    if(attrMatrix.filter(attrPair => answerSet[a][attrPair[0]] === attrPair[1]).length === 2) return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n// make a unique combination of each attribute/value, with no overlaps.\r\n// This is the solution to the current truth table.\r\nexport const calcSolution = (numAnswers: number, numAttributes:number): SolutionSet => {\r\n  const availableAttributes = [];\r\n  for(let i = 0; i < numAttributes; i++){\r\n    availableAttributes.push(Array.from(Array(numAnswers).keys()))\r\n  }\r\n\r\n  let generatedAnswer = [];\r\n  for(let i = 0; i < numAnswers; i++){\r\n    let answerAttrs = [];\r\n    for(let i = 0; i < availableAttributes.length; i++){\r\n      const randIdx = Math.floor(Math.random() * availableAttributes[i].length);\r\n      answerAttrs.push(availableAttributes[i][randIdx]);\r\n      availableAttributes[i].splice(randIdx, 1);\r\n    }\r\n    generatedAnswer.push(answerAttrs)\r\n  }\r\n\r\n  return generatedAnswer;\r\n}\r\n\r\nexport const generateCellMatrix = (solutionSet: SolutionSet, attributes:SimpleAttributeDef[]) => {\r\n  const numAttributes = attributes.length || 0;\r\n  const numValues = attributes[0].length;\r\n\r\n  if(numAttributes < 2 || numAttributes > 5){\r\n    console.error('invalid data, must use between 2 and 5 attributes');\r\n  }\r\n  \r\n  const boxSize = Math.pow(numValues, 2);\r\n  const gridShape = getGridShape(numAttributes);\r\n  const newMatrix = [];\r\n\r\n  let idx = 0;\r\n  for(let r = 0; r < gridShape.length; r++){\r\n    for(let c = 0; c < gridShape[r].length; c ++){\r\n      for(let bi = 0; bi < boxSize; bi++){\r\n        // [ 0, 1 ] is comparing attr0 and attr1\r\n        const attrPair = gridShape[r][c];\r\n        const xVal = Math.floor((idx % boxSize) / numValues);\r\n        const yVal = idx % numValues;\r\n\r\n        const ansMatrix: AttributeMatrix = [ [ attrPair[0], xVal ], [attrPair[1], yVal ] ]\r\n        const isSolution = isCellSolution(solutionSet, ansMatrix)\r\n\r\n        newMatrix.push({\r\n          idx: idx++,\r\n          attrs: attrPair,\r\n          isSolution: isSolution,\r\n          status: 0\r\n        } as CellObj)\r\n      }\r\n    }\r\n  }\r\n\r\n  return newMatrix;\r\n}","import { createSelector, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { RootState } from './store';\r\nimport { SolutionSet, AttributeMatrix, CellMatrix, CellObj, GameStatus, HintGiver, RawCell, RenderedHint, LevelData, LevelInfo, RenderedMenuGroup, SolvedType, GridLabels } from '../types';\r\nimport { getGridShape, LEVELDATA, HINT_GIVERS, LEVELMENU } from './data/data';\r\nimport { generateCellMatrix } from '../utils/puzzler';\r\nimport { STORE_SCHEMA } from '../utils/localstorage';\r\n\r\nexport interface GridState {\r\n  storeSchema: number,\r\n  cellMatrix: CellMatrix,\r\n  hintGivers: number[],\r\n  prevGameStatus: GameStatus,\r\n  gameStatus: GameStatus,\r\n  levelIdx: number,\r\n  hintIdx: number,\r\n  progression: number[],\r\n  gameReady: boolean\r\n}\r\n\r\nconst initialState: GridState = {\r\n  storeSchema: STORE_SCHEMA,\r\n  cellMatrix: [],\r\n  hintGivers: [],\r\n  prevGameStatus: 'start',\r\n  gameStatus: 'start',\r\n  levelIdx: -1,\r\n  hintIdx: -1,\r\n  progression: [],\r\n  gameReady: false\r\n};\r\n\r\ntype ResetType = {\r\n  levelData: LevelData,\r\n  resume?: boolean\r\n}\r\nexport const getHintIdxById = (id:string) => {\r\n  const foundIdx = HINT_GIVERS.findIndex(hg => hg.id === id);\r\n  if(foundIdx === -1) console.error(`could not find hintgiver with id \"${id}\"`);\r\n  return foundIdx;\r\n};\r\n\r\nexport const boardSlice = createSlice({\r\n  name: 'board',\r\n  initialState,\r\n  reducers: {\r\n    resetMatrix: (state: GridState, action: PayloadAction<ResetType>) => {\r\n      const levelData = action.payload.levelData;\r\n      if(action.payload.resume && state.cellMatrix.length > 0){\r\n        state.hintIdx = -1;\r\n        state.gameStatus = 'playing';\r\n        state.gameReady = true;\r\n      }else{\r\n        if(levelData.attributes?.length > 0){\r\n          state.cellMatrix = generateCellMatrix(levelData.solution, levelData.attributes);\r\n  \r\n          let hintGivers: number[] = [];\r\n          levelData.hints.forEach((hint, hIdx) => {\r\n            if(hint[1]){\r\n              const foundIdx = getHintIdxById(hint[1]);\r\n              if(foundIdx !== -1) hintGivers.push(foundIdx);\r\n            }else{\r\n              hintGivers.push(Math.floor(Math.random() * HINT_GIVERS.length));\r\n            }\r\n          });\r\n\r\n          state.hintGivers = hintGivers;\r\n          state.hintIdx = -1;\r\n          state.gameStatus = 'playing';\r\n          state.gameReady = true;\r\n  \r\n        } else {\r\n          state.cellMatrix = [];\r\n        }\r\n      }\r\n    },\r\n    rotateCell: (state, action: PayloadAction<number>) => {\r\n      if(state.cellMatrix){\r\n        const nextStatus = getNextStatus(state.cellMatrix[action.payload]);\r\n        state.cellMatrix[action.payload].status = nextStatus;\r\n      }\r\n    },\r\n    setActiveHint: (state, action: PayloadAction<number>) => {\r\n      state.hintIdx = action.payload;\r\n    },\r\n    submitAnswer: (state, action: PayloadAction<boolean>) => {\r\n      if(action.payload === true){\r\n        if(!state.progression.includes(state.levelIdx)){\r\n          state.progression.push(state.levelIdx)\r\n        }\r\n        state.gameStatus = 'roundWin';\r\n      }else{\r\n        state.gameStatus = 'invalidAnswer';\r\n      }\r\n    },\r\n    setGameStatus: (state, action: PayloadAction<GameStatus>) => {\r\n      if(action.payload !== state.prevGameStatus && state.gameStatus !== state.prevGameStatus){\r\n        state.prevGameStatus = state.gameStatus;\r\n      }\r\n      state.gameStatus = action.payload;\r\n    },\r\n    resumeLevel: (state, action: PayloadAction<number>) => {\r\n      state.gameReady = false;\r\n      state.gameStatus = 'loadingResume';\r\n      state.levelIdx = action.payload;\r\n    },\r\n    startLevel: (state, action: PayloadAction<number>) => {\r\n      state.gameReady = false;\r\n      state.gameStatus = 'loading';\r\n      state.levelIdx = action.payload;\r\n    },\r\n    restartLevel: (state) => {\r\n      state.gameReady = false;\r\n      state.gameStatus = 'loading';\r\n      state.levelIdx = getNextLevelIdx(state.levelIdx - 1);\r\n    },\r\n    startNextLevel: (state) => {\r\n      state.gameReady = false;\r\n      state.gameStatus = 'loading';\r\n      state.levelIdx = getNextLevelIdx(state.levelIdx);\r\n    },\r\n  } \r\n});\r\n\r\nexport const { resetMatrix, rotateCell, setActiveHint, submitAnswer, startLevel, resumeLevel, startNextLevel, restartLevel, setGameStatus } = boardSlice.actions;\r\n\r\n\r\n\r\n// answer set is the raw attributes (in order) and their values\r\n/// [1, 1, 1] would mean a valueIdx of 1 for attributes 0, 1, and 2\r\n\r\n// attrMatrix is a 2d array of attrIdx and numberIdx, so [[0,0],[2,0]] compares the 1st val of attr[0] with the 1st value of attr[2]\r\nexport const isCellSolution = (answerSet: SolutionSet, attrMatrix: AttributeMatrix) => {\r\n  for(let a = 0; a < answerSet.length; a++){\r\n    if(attrMatrix.filter(attrPair => answerSet[a][attrPair[0]] === attrPair[1]).length === 2) return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n\r\n\r\n// blank > no > yes > maybe > blank\r\nconst getNextStatus = (cellObj: CellObj) => {\r\n  try{\r\n    switch(cellObj.status){\r\n      case 0: return 2;\r\n      case 2: return 1;\r\n      case 1: return 0;\r\n    }\r\n  } catch(e){\r\n    console.error('unexpected lookup for cellObj', cellObj)\r\n  }\r\n\r\n  return 0;\r\n}\r\n\r\nexport const getCellMatrix = (state: RootState) => state.board.cellMatrix;\r\nexport const getHintGivers = (state: RootState) => state.board.hintGivers;\r\nexport const getActiveHintIdx = (state: RootState) => state.board.hintIdx;\r\nexport const getGameStatus = (state: RootState) => state.board.gameStatus;\r\nexport const getPrevGameStatus = (state: RootState) => state.board.prevGameStatus;\r\nexport const getLevelIdx = (state: RootState) => state.board.levelIdx;\r\nexport const getGameReady = (state: RootState) => state.board.gameReady;\r\nexport const getProgression = (state: RootState) => state.board.progression;\r\n// export const getProgression = (state: RootState) => [0,1];\r\n\r\nexport const renderHint = (hintGiverIdx: number, text: string) => ({\r\n  hintGiver: HINT_GIVERS[hintGiverIdx],\r\n  text: text\r\n});\r\n\r\nexport const getNextLevelIdx = (curIdx: number) => {\r\n  if(curIdx + 1 < LEVELDATA.length){\r\n    return curIdx + 1;\r\n  }\r\n\r\n  // for now, just start over!\r\n  return 0;\r\n};\r\n\r\nexport const selectLevelData = createSelector(\r\n  [getLevelIdx],\r\n  (levelIdx): LevelData => {\r\n    return LEVELDATA[levelIdx]\r\n  }\r\n);\r\n\r\nexport const selectLevelInfo = createSelector(\r\n  [selectLevelData, getLevelIdx, getProgression],\r\n  (levelData, levelIdx, progression): LevelInfo | null => {\r\n    if(!levelData) return null;\r\n    return {\r\n      title: levelData.title,\r\n      description: levelData.description,\r\n      layout: levelData.layout,\r\n      completed: progression.includes(levelIdx),\r\n      current: true,\r\n      level: levelIdx\r\n    };\r\n  }\r\n);\r\n\r\nexport const getLevelMenu = (state: RootState) => LEVELMENU;\r\n\r\n\r\n// eventually, merge in saved progress\r\nexport const selectAllLevelInfo = createSelector(\r\n  [getProgression, getLevelMenu, getLevelIdx],\r\n  (progression, levelMenu, levelIdx): RenderedMenuGroup[] => {\r\n    const levels = LEVELDATA.map((levelData, idx) => ({\r\n      title: levelData.title,\r\n      description: levelData.description,\r\n      layout: levelData.layout,\r\n      completed: progression.includes(idx),\r\n      current: idx === levelIdx,\r\n      level: idx\r\n    }));\r\n\r\n    return levelMenu.map(menuGroup => ({\r\n      title: menuGroup.title,\r\n      levels: menuGroup.levels.map(lId => levels[lId])\r\n    })).filter(levelMenu => levelMenu.levels.length > 0);\r\n  }\r\n);\r\n\r\nexport const selectHints = createSelector(\r\n  [getHintGivers, selectLevelData],\r\n  (hintGivers, levelData): RenderedHint[] => {\r\n    if(!levelData) return [];\r\n    return levelData.hints.map((h, hIdx) => renderHint(hintGivers[hIdx], h[0]));\r\n  }\r\n);\r\n\r\nexport const selectActiveHint = createSelector(\r\n  [getActiveHintIdx, selectLevelData, getHintGivers],\r\n  (activeHintIdx, levelData, hintGivers): RenderedHint | null => {\r\n    if(!levelData || activeHintIdx === -1){\r\n      return null;\r\n    }\r\n    // hack, otherwise when clue 3 is active, and switching to a level with 2 hints, errors out\r\n    if(activeHintIdx > levelData.hints.length){\r\n      return null;\r\n    }\r\n\r\n    return renderHint(hintGivers[activeHintIdx], levelData.hints[activeHintIdx][0]);\r\n  }\r\n);\r\n\r\nexport const selectActiveHintGiver = createSelector(\r\n  [selectActiveHint],\r\n  (activeHint): HintGiver | null => activeHint?.hintGiver || null\r\n);\r\n\r\nexport const selectAttributes = createSelector(\r\n  [selectLevelData],\r\n  (levelData) => levelData.attributes\r\n);\r\nexport const selectAttributeLabels = createSelector(\r\n  [selectLevelData],\r\n  (levelData) => levelData.attributeLabels\r\n);\r\n\r\nexport const selectGridInfo = createSelector(\r\n  [selectLevelData],\r\n  (levelData) => ({\r\n    numAttributes: levelData.attributes.length,\r\n    numValues: levelData.attributes[0].length\r\n  })\r\n);\r\n\r\nexport const selectGridLabels = createSelector(\r\n  [selectAttributes, selectAttributeLabels],\r\n  (attributes, attributeLabels): GridLabels => {\r\n    const gridShape:RawCell[][] = getGridShape(attributes.length);\r\n    const rowAttributes = gridShape.map(r => r[0][0]);\r\n    const colAttributes = gridShape[0].map(rc => rc[1]);\r\n\r\n    return {\r\n      rows:{\r\n        attributes:rowAttributes.map(idx => attributes[idx]),\r\n        labels:rowAttributes.map(idx => attributeLabels[idx])\r\n      },\r\n      cols:{\r\n        attributes:colAttributes.map(idx => attributes[idx]),\r\n        labels:colAttributes.map(idx => attributeLabels[idx])\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\nexport const selectGridBox = createSelector(\r\n  [getCellMatrix, selectGridInfo],\r\n  (cellMatrix, gridInfo) => {\r\n    const gridShape: RawCell[][] = getGridShape(gridInfo.numAttributes);\r\n    let idx = 0;\r\n    const gridSize = gridShape[0].length;\r\n    const boxSize = Math.pow(gridInfo.numValues, 2);\r\n    return gridShape?.map((row, rIdx) => {\r\n      return [...Array(gridSize)].map((_, cIdx) => {\r\n        let boxArr: CellObj[] = [];\r\n        if(!gridShape[rIdx][cIdx]){\r\n          // handles empty cells in larger maps\r\n          return boxArr;\r\n        }\r\n\r\n        for(let i = 0; i < boxSize; i++){\r\n          boxArr.push(\r\n            cellMatrix[idx++]\r\n          )\r\n        }\r\n        return boxArr;\r\n      })\r\n    })\r\n  }\r\n);\r\n\r\nexport const selectSolution = createSelector(\r\n  [selectLevelData],\r\n  (levelData) => levelData?.solution || null\r\n)\r\n\r\nexport const selectRenderedSolution = createSelector(\r\n  [selectSolution, selectAttributes],\r\n  (solution, attributes) => solution?.map(solution => {\r\n    return solution.map((vIdx,sIdx) => \r\n      attributes[sIdx][vIdx]\r\n    )\r\n  })\r\n);\r\n\r\nexport const selectAnsweredCells = createSelector(\r\n  [getCellMatrix],\r\n  (cellMatrix): CellObj[] => cellMatrix.filter(cell => cell.status === 1)\r\n);\r\nexport const selectSolutionCells = createSelector(\r\n  [getCellMatrix],\r\n  (cellMatrix): CellObj[] => cellMatrix.filter(cell => cell.isSolution)\r\n);\r\n\r\n// if every \"solution\" cell has a 1 status, and there are not extra answers\r\nexport const checkIfSolved = createSelector(\r\n  [selectAnsweredCells, selectSolutionCells],\r\n  (answeredCells, solutionCells): SolvedType => {\r\n    const numExpected = solutionCells.length;\r\n    if(answeredCells.length > numExpected) {\r\n      return 'incorrect';\r\n    } else if(answeredCells.length < numExpected) {\r\n      return 'incomplete';\r\n    }\r\n\r\n    for(let i = 0; i < solutionCells.length; i++){\r\n      if(!answeredCells.find(aC => aC.idx === solutionCells[i].idx)){\r\n        return 'incorrect';\r\n      }\r\n    }\r\n    return 'correct';\r\n  }\r\n);\r\n\r\nexport default boardSlice.reducer;","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport type { RootState, AppDispatch } from './store';\r\n\r\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import { useCallback } from 'react';\r\nimport styled from 'styled-components';\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport { getColor, mixinFontFamily } from '../../themes';\r\nimport { checkIfSolved, setGameStatus, submitAnswer } from '../../app/board-slice';\r\n\r\nconst StyledButton = styled.div`\r\n  border-radius: 1rem;\r\n  border: .4rem solid ${getColor('brown')};\r\n  cursor: pointer;\r\n  transition: background-color .1s, border-color .2s, box-shadow .15s, transform .15s;\r\n  text-align:center;\r\n  font-size:2.5rem;\r\n  padding: .5rem .5rem;\r\n  \r\n  ${mixinFontFamily('button')};\r\n  font-weight:800;\r\n  \r\n  &:active{\r\n    transform: translate(.35rem, .35rem);\r\n  }\r\n`;\r\n\r\nconst StyledSolvedButton = styled(StyledButton)`\r\n  padding: 1.5rem .5rem;\r\n\r\n  color: ${getColor('white')};\r\n  background-color:${getColor('green')};\r\n  border-color: ${getColor('green_light')};\r\n  box-shadow: 0.4rem 0.4rem 0 0.1rem ${getColor('green_light')};\r\n\r\n  &:hover{\r\n    border-color: ${getColor('white')};\r\n  }\r\n`;\r\n\r\nconst StyledHelpButton = styled(StyledButton)`\r\n  padding: 0.25rem .5rem;\r\n  color: ${getColor('brown_dark')};\r\n  background-color:${getColor('yellow')};\r\n  border-color: ${getColor('yellow_light')};\r\n  box-shadow: 0.4rem 0.4rem 0 0.1rem ${getColor('yellow_light')};\r\n  \r\n  &:hover{\r\n    border-color: ${getColor('white')};\r\n  }\r\n  &:active{\r\n    background-color: ${getColor('yellow')};\r\n    border-color: ${getColor('yellow_light')};\r\n    box-shadow: 0.1rem 0.1rem 0 0.3rem ${getColor('yellow_light')};\r\n  }\r\n`;\r\n\r\nconst StyledProgressButton = styled(StyledButton)`\r\n  padding: 0.25rem .5rem;\r\n  color: ${getColor('purple')};\r\n  background-color:${getColor('brown_dark')};\r\n  border-color: ${getColor('purple')};\r\n  box-shadow: 0.4rem 0.4rem 0 0.1rem ${getColor('purple')};\r\n  \r\n  &:hover{\r\n    color: ${getColor('pink')};\r\n    border-color: ${getColor('pink')};\r\n  }\r\n  &:active{\r\n    color: ${getColor('purple')};\r\n    background-color: ${getColor('brown_dark')};\r\n    border-color: ${getColor('purple')};\r\n    box-shadow: 0.1rem 0.1rem 0 0.3rem ${getColor('purple')};\r\n  }\r\n`;\r\n\r\nconst StyledContainer = styled.div`\r\n  ${StyledButton}{\r\n    margin:1rem;\r\n  }\r\n`;\r\n\r\nexport function BoardControls() {\r\n  const solvedType = useAppSelector(checkIfSolved);\r\n\r\n  const dispatch = useAppDispatch();\r\n  const onSubmitGame = useCallback((forceWin?: boolean) => {\r\n    dispatch(submitAnswer(forceWin || solvedType === 'correct'));\r\n  }, [ dispatch, solvedType ]);\r\n\r\n  return (\r\n    <StyledContainer>\r\n      <StyledHelpButton onClick={() => dispatch(setGameStatus('debug'))}>{'DEBUG'}</StyledHelpButton>\r\n      <StyledHelpButton onClick={() => dispatch(setGameStatus('help'))}>{'HELP!'}</StyledHelpButton>\r\n      <StyledProgressButton onClick={() => dispatch(setGameStatus('progress'))}>{'PROGRESS'}</StyledProgressButton>\r\n      <StyledSolvedButton onClick={() => onSubmitGame()}>{'SUBMIT'}</StyledSolvedButton>\r\n    </StyledContainer>\r\n  );\r\n}\r\n","export const RandIdx = (min:number, max:number) => {\r\n  return Math.floor(min + Math.random() * (max - min));\r\n}\r\n\r\nexport const RandBetween = (min:number, max:number) => {\r\n  return min + Math.random() * (max - min);\r\n}\r\n\r\nexport const RandFromArray = (array: any[]): any | null => {\r\n  if(array.length === 0) return null;\r\n  return array[Math.floor(Math.random() * array.length)]\r\n}\r\n\r\nexport const RandIdxFromArray = (array: any[]): number => {\r\n  if(array.length === 0) return -1;\r\n  return Math.floor(Math.random() * array.length)\r\n}\r\nexport const roundTo = (num:number, decimals:number = 2) => {\r\n  // @ts-ignore\r\n  return +(Math.round(num + `e+${decimals}`) + `e-${decimals}`);\r\n}\r\nexport const clamp = (num:number, min:number, max:number) => Math.min(Math.max(num, min), max);","import { createSelector, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { RootState } from './store';\r\nimport { Coordinate } from '../types';\r\nimport { clamp } from '../utils';\r\n\r\nexport interface UiState {\r\n  zoom: number;\r\n  zoomDelta: number;\r\n  positionDelta: Coordinate;\r\n  position: Coordinate;\r\n}\r\n\r\nconst initialState: UiState = {\r\n  zoom: 0.4,\r\n  zoomDelta: 0.0,\r\n  position: [0, -25],\r\n  positionDelta: [0, 0]\r\n};\r\n\r\nexport type DeltaValues = {\r\n  zoom: number;\r\n  position: Coordinate;\r\n}\r\n\r\nexport const uiSlice = createSlice({\r\n  name: 'ui',\r\n  initialState,\r\n  reducers: {\r\n    setZoom: (state: UiState, action: PayloadAction<number>) => {\r\n      state.zoom = action.payload;\r\n    },\r\n    setDeltaValues: (state: UiState, action: PayloadAction<DeltaValues>) => {\r\n      state.zoomDelta = action.payload.zoom;\r\n      state.positionDelta = action.payload.position;\r\n    },\r\n    setZoomDelta: (state: UiState, action: PayloadAction<number>) => {\r\n      state.zoomDelta = action.payload;\r\n    },\r\n    releaseDeltas: (state: UiState) => {\r\n      state.zoom = clamp(state.zoom + state.zoomDelta, .15, 1);\r\n      state.zoomDelta = 0;\r\n\r\n      state.position = [\r\n        clamp(state.position[0] + state.positionDelta[0], -50, 50),\r\n        clamp(state.position[1] + state.positionDelta[1], -50, 50)\r\n      ];\r\n      state.positionDelta = [0, 0];\r\n    },\r\n    setPosition: (state, action: PayloadAction<Coordinate>) => {\r\n      state.position = action.payload;\r\n    },\r\n    resetZoom: (state: UiState) => {\r\n      state.zoom = initialState.zoom;\r\n    },\r\n    resetPosition: (state: UiState) => {\r\n      state.position = initialState.position;\r\n    }\r\n  } \r\n});\r\n\r\nexport const { setDeltaValues, releaseDeltas, setZoom, setZoomDelta, setPosition, resetZoom, resetPosition } = uiSlice.actions;\r\n\r\nexport const getZoom = (state: RootState) => state.ui.zoom;\r\nexport const getZoomDelta = (state: RootState) => state.ui.zoomDelta;\r\nexport const getPosition = (state: RootState) => state.ui.position;\r\nexport const getPositionDelta = (state: RootState) => state.ui.positionDelta;\r\n\r\nexport const selectZoom = createSelector(\r\n  [getZoom, getZoomDelta], \r\n  (zoom, zoomDelta) => {\r\n    return clamp(zoom + zoomDelta, .15, 1);\r\n  }\r\n);\r\n\r\nexport const selectPosition = createSelector(\r\n  [getPosition, getPositionDelta], \r\n  (position, positionDelta) => [\r\n    clamp(position[0] + positionDelta[0], -50, 50),\r\n    clamp(position[1] + positionDelta[1], -50, 50)\r\n  ]\r\n);\r\nexport default uiSlice.reducer;","import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport { selectPosition, releaseDeltas, resetPosition, resetZoom, selectZoom, setPosition, setZoom, setDeltaValues } from '../../app/ui-slice';\r\nimport { getColor } from '../../themes';\r\nimport { Coordinate } from '../../types';\r\nimport {  roundTo } from '../../utils';\r\n\r\nconst StyledTouchInstructions = styled.div`\r\n  position:absolute;\r\n  top:0;\r\n  text-align:center;\r\n  width:100%;\r\n  \r\n  background-color: ${getColor('brown')};\r\n  z-index:1;\r\n  margin-top:.50rem;\r\n\r\n  p{\r\n    font-size:1.5rem;\r\n    color: ${getColor('brown_light')};\r\n    font-style:italic;\r\n  }\r\n`\r\n\r\nconst StyledContainer = styled.div`\r\n  position:absolute;\r\n  right:0;\r\n  top:0;\r\n  padding-left: 1rem;\r\n  border: .25rem solid ${getColor('white')};\r\n  border-radius: 1rem;\r\n  color: ${getColor('white')};\r\n  background-color: ${getColor('brown')};\r\n  z-index:1;\r\n\r\n  >p{\r\n    font-size: 1.5rem;\r\n    margin-bottom: .5rem;\r\n    color: ${getColor('brown_light')};\r\n    text-align:center;\r\n  }\r\n\r\n  >div{\r\n    display:inline-block;\r\n    vertical-align: middle;\r\n    height: 6rem;\r\n  }\r\n`;\r\n\r\nconst StyledZoomContainer = styled.div`\r\n  margin-right: 1rem;\r\n`;\r\n\r\nconst StyledPanContainer = styled.div`\r\n  >button, >input {\r\n    display:inline-block;\r\n    vertical-align:middle;\r\n  }\r\n\r\n  >button {\r\n    margin-right: 1rem;\r\n  }\r\n\r\n`;\r\n\r\nconst StyledSlider = styled.input`\r\n  width: 5rem;\r\n  cursor: pointer;\r\n`\r\nconst PanSliderY = styled(StyledSlider)`\r\n  transform: rotate(90deg);\r\n  margin-left: -1rem;\r\n  margin-top:-1rem;\r\n`;\r\n\r\nconst StyledButton = styled.div`\r\n  font-size: 2rem;\r\n  margin-bottom: .5rem;\r\n  cursor: pointer;\r\n\r\n  &:hover{\r\n    color: ${getColor('green_light')}\r\n  }\r\n`;\r\n\r\nfunction isTouchDevice() {\r\n  return (('ontouchstart' in window) ||\r\n     (navigator.maxTouchPoints > 0) ||\r\n     (navigator.msMaxTouchPoints > 0));\r\n}\r\n\r\n\r\nlet startAvgCoords: Coordinate = [0,0];\r\nlet startPinchDistance: number = 0;\r\n\r\nexport function PositionControls() {\r\n  const zoom = useAppSelector(selectZoom);\r\n  const position = useAppSelector(selectPosition);\r\n  const [ isTouch, setIsTouch ] = useState(false);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const onChangeZoom = useCallback((e) => {\r\n    dispatch(setZoom(e.target.value / 10));\r\n  }, [ dispatch ]);\r\n  \r\n  const onChangePositionX = useCallback((e) => {\r\n    dispatch(setPosition([+e.target.value, position[1]]));\r\n  }, [ dispatch, position ]);\r\n  \r\n  const onChangePositionY = useCallback((e) => {\r\n    dispatch(setPosition([position[0], +e.target.value]));\r\n  }, [ dispatch, position ]);\r\n\r\n  const onResetZoom = useCallback(() => {\r\n    dispatch(resetZoom());\r\n  }, [ dispatch ]);\r\n\r\n  const onResetPosition = useCallback(() => {\r\n    dispatch(resetPosition());\r\n  }, [ dispatch ]);\r\n\r\n  const onDocumentTouchMove = useCallback((e:TouchEvent) => {\r\n    if(e.touches.length > 1){\r\n      // pinchy checks\r\n      const pinchDistance = Math.sqrt(Math.pow((e.touches[1].clientX - e.touches[0].clientX), 2) + Math.pow((e.touches[1].clientY - e.touches[0].clientY), 2));\r\n\r\n      const avgCoords: Coordinate = [\r\n        roundTo(((e.touches[0].clientX + e.touches[1].clientX) / 2) - startAvgCoords[0], 2),\r\n        roundTo(((e.touches[0].clientY + e.touches[1].clientY) / 2) - startAvgCoords[1], 2)\r\n      ];\r\n\r\n      const deltaDiff = roundTo(pinchDistance - startPinchDistance, 2);\r\n\r\n      // -250 > 250, pinch-ins are negative, pinch-outs are positive.\r\n      // so divide by 250 to get the perc change\r\n      // position goes between 50s, so get the perc change and clamp that\r\n      dispatch(setDeltaValues({\r\n        zoom: deltaDiff / 250,\r\n        position: [ (avgCoords[0] / 150) * 50, (avgCoords[1] / 150) * 50 ]\r\n      }));\r\n    }\r\n  }, [dispatch]);\r\n\r\n  const onDocumentTouchStart = useCallback((e:TouchEvent) => {\r\n    // console.log('onDocumentTouchStart');\r\n    if(e.touches.length > 1){\r\n      // pinchy checks\r\n      startAvgCoords = [\r\n        (e.touches[0].clientX + e.touches[1].clientX) / 2,\r\n        (e.touches[0].clientY + e.touches[1].clientY) / 2\r\n      ];\r\n      startPinchDistance = Math.sqrt(Math.pow((e.touches[1].clientX - e.touches[0].clientX), 2) + Math.pow((e.touches[1].clientY - e.touches[0].clientY), 2));\r\n    }\r\n  }, []);\r\n\r\n  const onDocumentTouchEnd = useCallback((e:TouchEvent) => {\r\n    // console.log('onDocumentTouchEnd');\r\n    // e.preventDefault(); // prevent mouse click from triggering even on a touch device\r\n    \r\n    dispatch(releaseDeltas());\r\n  }, [dispatch]);\r\n  \r\n  useEffect(() => {\r\n    // document.addEventListener('mouseup', onDocumentMouseUp);\r\n    document.addEventListener('touchstart', onDocumentTouchStart);\r\n    document.addEventListener('touchmove', onDocumentTouchMove);\r\n    document.addEventListener('touchend', onDocumentTouchEnd);    \r\n  }, [ onDocumentTouchStart, onDocumentTouchMove, onDocumentTouchEnd ]);\r\n\r\n  useEffect(() => {\r\n    setIsTouch(isTouchDevice());\r\n  }, [ setIsTouch ])\r\n\r\n\r\n  const showPositionControls = useMemo(() => {\r\n    return !isTouch;\r\n  }, [ isTouch ]);\r\n\r\n  if(showPositionControls){\r\n    return (\r\n      <StyledContainer>\r\n        <p>{'- reposition board -'}</p>\r\n        <StyledZoomContainer>\r\n          <StyledButton onClick={onResetZoom} title={'reset zoom'}>{'ZOOM'}</StyledButton>\r\n          <StyledSlider type=\"range\" min={1} max={10} value={zoom * 10} onChange={onChangeZoom} id=\"zoomRange\" />\r\n        </StyledZoomContainer>\r\n        <StyledPanContainer>\r\n          <StyledButton onClick={onResetPosition} title={'reset pan'}>{'PAN'}</StyledButton>\r\n          <StyledSlider type=\"range\" min={-50} max={50} value={position[0]} onChange={onChangePositionX} id=\"xRange\" />\r\n          <PanSliderY type=\"range\" min={-50} max={50} value={position[1]} onChange={onChangePositionY} id=\"yRange\" />\r\n        </StyledPanContainer>\r\n      </StyledContainer>\r\n    );\r\n  } else{\r\n    return (\r\n      <StyledTouchInstructions>\r\n        <p>{'use two fingers to move around the board'}</p>\r\n      </StyledTouchInstructions>\r\n    );\r\n  }\r\n\r\n\r\n}\r\n","import { useCallback, useMemo } from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport { getColor, mixinFontFamily } from '../../themes';\r\nimport { CellObj, CellStatus, RawCell } from '../../types';\r\nimport { rotateCell, selectGridBox, selectGridLabels, selectGridInfo } from '../../app/board-slice';\r\nimport { BoardControls } from '../board/board-controls';\r\nimport { selectPosition, selectZoom } from '../../app/ui-slice';\r\nimport { PositionControls } from './position-controls';\r\n\r\n\r\nconst StyledBoardContainer = styled.div`\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n`\r\n\r\nconst StyledBoard = styled.div`\r\n  position:absolute;\r\n  left:50%;\r\n  top:40%;\r\n\r\n  display:grid;\r\n  grid-template-columns: 15rem 13rem 13rem 13rem; \r\n  grid-template-rows: 15rem 13rem 13rem 13rem; \r\n  column-gap: 2rem;\r\n  row-gap: 2rem;\r\n  color: ${getColor('brown_light')};\r\n  ${mixinFontFamily('gameboard')};\r\n\r\n  /* transform-origin:left; */\r\n\r\n  >div{\r\n    display:grid;\r\n    column-gap: 2rem;\r\n    row-gap: 2rem;\r\n  }\r\n`\r\nconst StyledLeftLabels = styled.div`\r\n  grid-row: 2 / span 3;\r\n  grid-column: 1 / span 1;\r\n  \r\n  grid-template-columns: 15rem; \r\n  grid-template-rows: 13rem 13rem 13rem;\r\n`\r\n\r\ntype StyledLabelProps = {\r\n  gridSize: number\r\n}\r\nconst StyledLeftLabel = styled.div<StyledLabelProps>`\r\n  position:relative;\r\n  /* padding-right:1rem; */\r\n  padding-top:1rem;\r\n  margin-right: -.5rem;\r\n\r\n\r\n  text-align:right;\r\n  >span{\r\n    font-weight: 600;\r\n    position:absolute;\r\n    right:0;\r\n    white-space:nowrap;\r\n  }\r\n\r\n  ${p => p.gridSize === 4 ? css`\r\n    height: 25%;\r\n    >span{\r\n      font-size: 2.5rem;\r\n    }\r\n  `: css`\r\n    height: 33%;\r\n    >span{\r\n      font-size: 3.5rem;\r\n    }\r\n  `}\r\n`\r\n\r\n\r\n\r\nconst StyledHeaderText = styled.span`\r\n  position: absolute;\r\n  font-size: 2rem;\r\n  white-space:nowrap;\r\n  ${mixinFontFamily('special')};\r\n  color: ${getColor('white')};\r\n  opacity: .5;\r\n`\r\nconst StyledLeftContainer = styled.div`\r\n`\r\nconst StyledLeftHeaders = styled.div`\r\n  grid-row: 2 / span 3;\r\n  grid-column: 1 / span 1;\r\n  \r\n  grid-template-columns: 15rem; \r\n  grid-template-rows: 13rem 13rem 13rem;\r\n`\r\nconst StyledLeftHeader = styled.div`\r\n  text-align:right;\r\n  position:relative;\r\n\r\n  ${StyledHeaderText}{\r\n    right:50%;\r\n    top: -1.5rem;\r\n  }\r\n`\r\nconst StyledTopContainer = styled.div`\r\n`\r\nconst StyledTopHeaders = styled.div`\r\n  grid-column: 2 / span 3;\r\n  grid-row: 1 / span 1;\r\n\r\n  grid-template-columns: 13rem 13rem 13rem;\r\n  grid-template-rows: 15rem;\r\n  \r\n`\r\nconst StyledTopHeader = styled.div<StyledLabelProps>`\r\n  display:inline-block;\r\n  position:relative;\r\n\r\n  ${StyledHeaderText}{\r\n    top:50%;\r\n    transform-origin: left;\r\n    transform: rotate(-90deg);\r\n  }\r\n\r\n  ${p => p.gridSize === 4 ? css`\r\n    ${StyledHeaderText}{\r\n      left: -1rem;\r\n    }\r\n  `: css`\r\n    ${StyledHeaderText}{\r\n      left: -.5rem;\r\n    }\r\n  `}\r\n`\r\n\r\n\r\nconst StyledTopLabels = styled.div`\r\n  grid-column: 2 / span 3;\r\n  grid-row: 1 / span 1;\r\n  \r\n  grid-template-columns: 13rem 13rem 13rem;\r\n  grid-template-rows: 15rem;\r\n`\r\nconst StyledTopLabel = styled.div<StyledLabelProps>`\r\n  display:inline-block;\r\n  ${p => p.gridSize === 4 ? css`\r\n    width: 25%;\r\n  `: css`\r\n    width: 33%;\r\n  `}\r\n  height: 100%;\r\n  position:relative;\r\n\r\n  span{\r\n    display:block;\r\n    position: absolute;\r\n\r\n    font-size: 3.5rem;\r\n    font-weight: 600;\r\n\r\n    ${p => p.gridSize === 4 ? css`\r\n      left: 1rem;\r\n    `: css`\r\n      left: 2rem;\r\n    `}\r\n    bottom: -2rem;\r\n    display: block;\r\n    white-space: nowrap;\r\n    transform-origin: left;\r\n    transform: rotate(-90deg);\r\n  }\r\n`\r\nconst StyledCells = styled.div`\r\n  grid-column: 2 / span 3;\r\n  grid-row: 2 / span 3;\r\n\r\n  grid-template-columns: 13rem 13rem 13rem;\r\n  grid-template-rows: 13rem 13rem 13rem;\r\n`\r\nconst StyledRawCellGroup = styled.div`\r\n  display:grid;\r\n  column-gap: .6rem;\r\n  row-gap: .6rem;\r\n`\r\ntype StyledCellGroupProps = {\r\n  gridSize: number,\r\n  cellRatio: string\r\n}\r\nconst StyledCellGroup = styled(StyledRawCellGroup)<StyledCellGroupProps>`\r\n  display:grid;\r\n  grid-template-columns: repeat(${p => p.gridSize}, ${p => p.cellRatio});\r\n  grid-template-rows: repeat(${p => p.gridSize}, ${p => p.cellRatio});\r\n  column-gap: .6rem;\r\n  row-gap: .6rem;\r\n\r\n  /* \r\n    grid-column: 1 i[ix]\r\n    grid-row: 2 i\r\n  */\r\n`\r\ntype StyledCellProps = {\r\n  status: CellStatus,\r\n  isSolution?: boolean\r\n}\r\nconst StyledCell = styled.div<StyledCellProps>`\r\n  border-radius: 1rem;\r\n  border: .4rem solid ${getColor('brown')};\r\n  cursor: pointer;\r\n  transition: background-color .1s, border-color .2s, box-shadow .15s, transform .15s;\r\n\r\n  ${p => p.status === 0 && css`\r\n    background-color:${getColor('brown')};\r\n    border-color: ${getColor('white')};\r\n    box-shadow: 0.4rem 0.4rem 0 0.1rem ${getColor('white')};\r\n  `};\r\n  ${p => p.status === 1 && css`\r\n    background-color:${getColor('green')};\r\n    border-color: ${getColor('green_light')};\r\n    box-shadow: 0.4rem 0.4rem 0 0.1rem ${getColor('green_light')};\r\n  `};\r\n  ${p => p.status === 2 && css`\r\n    background-color:${getColor('red_light')};\r\n    border-color: ${getColor('pink')};\r\n    box-shadow: 0.4rem 0.4rem 0 0.1rem ${getColor('pink')};\r\n  `};\r\n  &:hover{\r\n    ${p => p.status === 0 && css`\r\n      border-color: ${getColor('pink')};\r\n    `};\r\n    ${p => p.status === 1 && css`\r\n      border-color: ${getColor('white')};\r\n    `};\r\n    ${p => p.status === 2 && css`\r\n      border-color: ${getColor('green_light')};\r\n    `};\r\n  }\r\n  \r\n  &:active{\r\n    transform: translate(.35rem, .35rem);\r\n\r\n    ${p => p.status === 0 && css`\r\n      background-color: ${getColor('red_light')};\r\n      border-color: ${getColor('pink')};\r\n      box-shadow: 0.1rem 0.1rem 0 0.3rem ${getColor('pink')};\r\n    `};\r\n    ${p => p.status === 1 && css`\r\n      background-color: ${getColor('brown')};\r\n      border-color: ${getColor('white')};\r\n      box-shadow: 0.1rem 0.1rem 0 0.3rem ${getColor('white')};\r\n    `};\r\n    ${p => p.status === 2 && css`\r\n      background-color: ${getColor('green')};\r\n      border-color: ${getColor('green_light')};\r\n      box-shadow: 0.1rem 0.1rem 0 0.3rem ${getColor('green_light')};\r\n    `};\r\n  }\r\n`\r\nconst BlankCellGroup = styled(StyledRawCellGroup)`\r\n  background-color: ${getColor('white')};\r\n  opacity: .2;\r\n`\r\n\r\nconst StyledControls = styled.div`\r\n  grid-column: 1 / span 1;\r\n  grid-row: 1 / span 1;\r\n  position:absolute;\r\n  bottom:0;\r\n  right:0;\r\n`;\r\n\r\nexport function Board() {\r\n  const dispatch = useAppDispatch();\r\n  const grid = useAppSelector(selectGridBox);\r\n  const gridLabels = useAppSelector(selectGridLabels);\r\n  const gridInfo = useAppSelector(selectGridInfo);\r\n  const zoom = useAppSelector(selectZoom);\r\n  const position = useAppSelector(selectPosition);\r\n\r\n  const onClickCell = useCallback((cellIdx) => {\r\n    dispatch(rotateCell(cellIdx));\r\n  }, [ dispatch ]);\r\n\r\n  const cellRatio = useMemo(() => {\r\n    if(gridInfo.numValues === 3) {\r\n      return '30%';\r\n    } else if(gridInfo.numValues === 4) {\r\n      return '20%';\r\n    }\r\n    return `${Math.round(100 / gridInfo.numValues)}%`;\r\n  }, [ gridInfo.numValues ])\r\n\r\n\r\n  const renderCellGroup = (cellGroup: CellObj[], cgKey: string, gridSize: number, cellRatio: string, boardCell: RawCell) => {\r\n    // [0] check here cause this is all janky and the individual cells are undefined on load\r\n    if(cellGroup.length > 0 && cellGroup[0]){\r\n      return (\r\n        <StyledCellGroup \r\n          key={cgKey}\r\n          gridSize={gridSize}\r\n          cellRatio={cellRatio}\r\n          style={{gridRow: `${boardCell[0] + 1} / span 1`, gridColumn: `${boardCell[1] + 1} / span 1`}}\r\n        >\r\n          {cellGroup.map(cell => (\r\n            <StyledCell \r\n              key={`cell${cell?.idx}`}\r\n              status={cell.status}\r\n              isSolution={cell.isSolution}\r\n              onClick={() => onClickCell(cell.idx)}\r\n            />\r\n          ))}\r\n        </StyledCellGroup>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <BlankCellGroup \r\n        key={cgKey} \r\n        style={{gridRow: `${boardCell[0] + 1} / span 1`, gridColumn: `${boardCell[1] + 1} / span 1`}}\r\n      />\r\n    )\r\n  }\r\n\r\n  const tStyles = {\r\n    transform: `translate(${position[0]}%, ${position[1]}%) matrix(2.5,1.25,-2.5,1.25,-300,-0) scale(${zoom})`\r\n  };\r\n\r\n  const text = (v: string, isLabel?: boolean) => {\r\n    // const uppercase = true;\r\n    // return `${uppercase ? v.toUpperCase() : v}`;\r\n    \r\n    if(isLabel){\r\n      return `- ${v} -`;\r\n    }else{\r\n      return `${v.toUpperCase()}`;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <StyledBoardContainer>\r\n      <PositionControls />\r\n      <StyledBoard style={tStyles}>\r\n        <StyledControls>\r\n          <BoardControls />\r\n        </StyledControls>\r\n        <StyledCells>\r\n          {grid.map((gridRow, grIdx) => (\r\n            gridRow.map((cellGroup, cgIdx) => renderCellGroup(cellGroup, `cg${cgIdx}`, gridInfo.numValues, cellRatio, [grIdx, cgIdx])\r\n          )))}\r\n        </StyledCells>\r\n        <StyledTopHeaders>\r\n          {gridLabels.cols.labels.map((label, glIdx) => (\r\n            <StyledTopHeader key={`lh${glIdx}`} gridSize={gridInfo.numValues}>\r\n              <StyledHeaderText>{text(label, true)}</StyledHeaderText>\r\n            </StyledTopHeader>\r\n          ))}\r\n        </StyledTopHeaders>\r\n        <StyledTopLabels>\r\n          {gridLabels.cols.attributes.map((gl, glIdx) => (\r\n            <StyledTopContainer key={`tl${glIdx}`}>\r\n              {gl.map((v,vIdx) => (\r\n                <StyledTopLabel key={`tv${vIdx}`} gridSize={gridInfo.numValues}>\r\n                  <span>{text(v, false)}</span>\r\n                </StyledTopLabel>\r\n              ))}\r\n            </StyledTopContainer>\r\n          ))}\r\n        </StyledTopLabels>\r\n        \r\n        <StyledLeftHeaders>\r\n          {gridLabels.rows.labels.map((label, glIdx) => (\r\n            <StyledLeftHeader key={`th${glIdx}`}>\r\n              <StyledHeaderText>{text(label, true)}</StyledHeaderText>\r\n            </StyledLeftHeader>\r\n          ))}\r\n        </StyledLeftHeaders>\r\n        <StyledLeftLabels>\r\n          {gridLabels.rows.attributes.map((gl, glIdx) => (\r\n            <StyledLeftContainer key={`ll${glIdx}`}>\r\n              {gl.map((v,vIdx) => (\r\n                <StyledLeftLabel key={`lv${vIdx}`} gridSize={gridInfo.numValues}>\r\n                  <span>{text(v, false)}</span>\r\n                </StyledLeftLabel>\r\n              ))}\r\n            </StyledLeftContainer>\r\n          ))}\r\n        </StyledLeftLabels>\r\n\r\n      </StyledBoard>\r\n    </StyledBoardContainer>\r\n  );\r\n}\r\n","import styled from 'styled-components';\r\nimport { MouseEventHandler } from 'hoist-non-react-statics/node_modules/@types/react';\r\nimport { getColor, mixinFontFamily } from '../themes';\r\n\r\nexport const StyledButton = styled.div`\r\n  border-radius: 1rem;\r\n  cursor: pointer;\r\n  transition: background-color .1s, border-color .2s, box-shadow .15s, transform .15s;\r\n  text-align:center;\r\n  padding: 1.5rem .5rem;\r\n\r\n  span{\r\n    font-size:2.5rem;\r\n  }\r\n  ${mixinFontFamily('button')};\r\n  \r\n  &:hover{\r\n    transform: translate(-.15rem, -.15rem);\r\n  }\r\n  &:active{\r\n    transform: translate(.45rem, .65rem);\r\n  }\r\n`\r\n\r\nconst StyledPositiveButton = styled(StyledButton)`\r\n  color: ${getColor('white')};\r\n  background-color:${getColor('green')};\r\n  box-shadow: 0.4rem 0.5rem 0 0.4rem ${getColor('green_light')};\r\n\r\n  &:hover{\r\n    box-shadow: 0.6rem 0.75rem 0 0.4rem ${getColor('green_light')};\r\n  }\r\n  &:active{\r\n    background-color:${getColor('green')};\r\n    box-shadow: 0.1rem 0.1rem 0 0.0rem ${getColor('green_light')};\r\n  }\r\n`;\r\n\r\nconst StyledNegativeButton = styled(StyledButton)`\r\n  color: ${getColor('white')};\r\n  background-color:${getColor('red')};\r\n  box-shadow: 0.4rem 0.5rem 0 0.4rem ${getColor('red_light')};\r\n\r\n  &:hover{\r\n    box-shadow: 0.6rem 0.75rem 0 0.4rem ${getColor('red_light')};\r\n  }\r\n  &:active{\r\n    background-color:${getColor('red')};\r\n    box-shadow: 0.1rem 0.1rem 0 0.0rem ${getColor('red_light')};\r\n  }\r\n`;\r\n\r\nconst StyledSpecialButton = styled(StyledButton)`\r\n  color: ${getColor('white')};\r\n  background-color:${getColor('yellow_dark')};\r\n  box-shadow: 0.4rem 0.5rem 0 0.4rem ${getColor('yellow')};\r\n\r\n  &:hover{\r\n    box-shadow: 0.6rem 0.75rem 0 0.4rem ${getColor('yellow')};\r\n  }\r\n  &:active{\r\n    background-color:${getColor('yellow_dark')};\r\n    box-shadow: 0.1rem 0.1rem 0 0.0rem ${getColor('yellow')};\r\n  }\r\n`;\r\n\r\n\r\nconst StyledNeutralButton = styled(StyledButton)`\r\n  color: ${getColor('white')};\r\n  background-color:${getColor('brown_dark')};\r\n  box-shadow: 0.4rem 0.5rem 0 0.4rem ${getColor('brown')};\r\n\r\n  &:hover{\r\n    box-shadow: 0.6rem 0.75rem 0 0.4rem ${getColor('brown')};\r\n  }\r\n  &:active{\r\n    background-color:${getColor('brown_dark')};\r\n    box-shadow: 0.1rem 0.1rem 0 0.0rem ${getColor('brown')};\r\n  }\r\n`;\r\n\r\ntype ButtonType = 'positive' | 'negative' | 'special' | 'neutral';\r\n\r\ninterface LBType {\r\n  text: string,\r\n  onClick?: MouseEventHandler,\r\n  buttonType?: ButtonType\r\n}\r\n\r\nexport function Button({ onClick, text, buttonType }: LBType) {\r\n  switch(buttonType){\r\n    case 'positive': return (\r\n      <StyledPositiveButton onClick={onClick}><span>{text}</span></StyledPositiveButton>\r\n    )\r\n    case 'negative': return (\r\n      <StyledNegativeButton onClick={onClick}><span>{text}</span></StyledNegativeButton>\r\n    )\r\n    case 'special': return (\r\n      <StyledSpecialButton onClick={onClick}><span>{text}</span></StyledSpecialButton>\r\n    )\r\n    default: return (\r\n      <StyledNeutralButton onClick={onClick}><span>{text}</span></StyledNeutralButton>\r\n    )\r\n  }\r\n}\r\n","import styled from 'styled-components';\r\nimport { Button, StyledButton } from '../../../components/button';\r\nimport { getColor } from '../../../themes';\r\n\r\n// basic positioning all modals should have\r\nexport const StyledModalAbstract = styled.div`\r\n  position:absolute;\r\n  width:100%;\r\n  height:100%;\r\n  \r\n  left:50%;\r\n  top:50%;\r\n  transform: translate(-50%, -50%);\r\n  \r\n  display:grid;\r\n  grid-template-columns: 5rem auto 5rem; \r\n  grid-template-rows: min-content auto min-content;\r\n\r\n  padding:1rem;\r\n`\r\n\r\nexport const StyledModalContainer = styled(StyledModalAbstract)`\r\n  max-width:80%;\r\n  max-height:80%;\r\n  border-radius:2rem;\r\n\r\n  @media (max-width: 600px) {\r\n    max-width:90%;\r\n    max-height:95%;\r\n  }\r\n\r\n  background-color: ${getColor('brown_light')};\r\n  color: ${getColor('brown_dark')};\r\n  border: 0.75rem solid ${getColor('brown_dark')};\r\n`;\r\n\r\nexport const StyledModalHeader = styled.div`\r\n  grid-column: 1 / span 3;\r\n  grid-row: 1 / span 1;\r\n  text-align:center;\r\n`;\r\n\r\nexport const StyledModalBody = styled.ul`\r\n  grid-column: 1 / span 3;\r\n  grid-row: 2 / span 1;\r\n\r\n  width:100%;\r\n  height:100%;\r\n  padding: .5rem 3rem;\r\n  overflow-y:auto;\r\n`;\r\n\r\nexport const StyledModalFooter = styled.div`\r\n  grid-column: 1 / span 3;\r\n  grid-row: 3 / span 1;\r\n\r\n  padding: 1rem;\r\n\r\n  >${StyledButton}{\r\n    margin: 2rem 0rem;\r\n  }\r\n`;\r\n\r\nexport function BasicModal() {\r\n  return (\r\n    <StyledModalContainer>\r\n      <StyledModalHeader>\r\n        <h1>{'BASIC'}</h1>\r\n      </StyledModalHeader>\r\n      \r\n      <StyledModalBody>\r\n        \r\n      </StyledModalBody>\r\n      <StyledModalFooter>\r\n        <Button text={'OK'}/>\r\n      </StyledModalFooter>\r\n    </StyledModalContainer>\r\n  );\r\n}\r\n","import { useAppDispatch } from '../../../app/hooks';\r\nimport { Button } from '../../../components/button';\r\nimport { restartLevel, setGameStatus, startNextLevel } from '../../../app/board-slice';\r\nimport { StyledModalBody, StyledModalContainer, StyledModalFooter, StyledModalHeader } from './basic';\r\n\r\nexport function WinModal() {\r\n  const dispatch = useAppDispatch();\r\n\r\n  return (\r\n    <StyledModalContainer>\r\n      <StyledModalHeader>\r\n        <h1>{'CORRECT!'}</h1>\r\n      </StyledModalHeader>\r\n\r\n      <StyledModalBody>\r\n        \r\n      </StyledModalBody>\r\n      <StyledModalFooter>\r\n        <Button buttonType={'special'} text={'REPLAY LEVEL'} onClick={() => dispatch(startNextLevel())} />\r\n        <Button text={'NEXT LEVEL'} onClick={() => dispatch(startNextLevel())} />\r\n      </StyledModalFooter>\r\n    </StyledModalContainer>\r\n  );\r\n}\r\n\r\nexport function LoseModal() {\r\n  const dispatch = useAppDispatch();\r\n\r\n  return (\r\n    <StyledModalContainer>\r\n      <StyledModalHeader>\r\n        <h1>{'INCORRECT!'}</h1>\r\n      </StyledModalHeader>\r\n\r\n      <StyledModalBody>\r\n        <p>{'Every green cell must match the solution'}</p>\r\n      </StyledModalBody>\r\n      <StyledModalFooter>\r\n        <Button buttonType={'negative'} text={'RESET LEVEL'} onClick={() => dispatch(restartLevel())} />\r\n        <Button buttonType={'special'} text={'SKIP TO NEXT LEVEL!'} onClick={() => dispatch(startNextLevel())} />\r\n        <Button text={'KEEP TRYING'} onClick={() => dispatch(setGameStatus('playing'))} />\r\n      </StyledModalFooter>\r\n    </StyledModalContainer>\r\n  );\r\n}\r\n","import styled from 'styled-components';\r\nimport { useAppDispatch, useAppSelector } from '../../../app/hooks';\r\nimport { selectAttributes, selectRenderedSolution, setGameStatus } from '../../../app/board-slice';\r\nimport { StyledModalBody, StyledModalContainer, StyledModalFooter, StyledModalHeader } from './basic';\r\nimport { Button } from '../../../components/button';\r\nimport { getColor } from '../../../themes';\r\n\r\nconst StyledSolution = styled.div`\r\n  margin-top: 2rem;\r\n\r\n  table{\r\n    width:100%;\r\n    border-collapse: collapse;\r\n    tr{\r\n      border: 2px solid ${getColor('white')};\r\n    }\r\n    th, td{\r\n      padding:.5rem;\r\n      text-align:center;\r\n      border: 2px solid ${getColor('white')};\r\n    }\r\n  }\r\n`\r\n\r\nexport function DebugModal() {\r\n  const dispatch = useAppDispatch();\r\n  const renderedSolution = useAppSelector(selectRenderedSolution);\r\n  const attributes = useAppSelector(selectAttributes);\r\n\r\n  return (\r\n    <StyledModalContainer>\r\n      <StyledModalHeader>\r\n        <h1>{'DEBUG'}</h1>\r\n      </StyledModalHeader>\r\n      \r\n      <StyledModalBody>\r\n        <StyledSolution>\r\n          <p>{'DEBUG SOLUTION'}</p>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                {attributes.map((attr, idx) => (\r\n                  <th key={idx}><span>{`group ${idx + 1}`}</span></th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {renderedSolution?.map((rS, idx) => (\r\n                <tr key={idx}>\r\n                  {rS.map((rSe, rSeIdx) => (\r\n                    <td key={`${idx}-${rSeIdx}`}><span>{rSe}</span></td>\r\n                  ))}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </StyledSolution>\r\n      </StyledModalBody>\r\n      <StyledModalFooter>\r\n        <Button text={'OK'} onClick={() => dispatch(setGameStatus('playing'))} />\r\n      </StyledModalFooter>\r\n    </StyledModalContainer>\r\n  );\r\n}\r\n","import { useAppDispatch, useAppSelector } from '../../../app/hooks';\r\nimport { getLevelIdx, resumeLevel, setGameStatus, startLevel } from '../../../app/board-slice';\r\nimport { Button } from '../../../components/button';\r\nimport { StyledModalBody, StyledModalContainer, StyledModalFooter, StyledModalHeader } from './basic';\r\nimport { resetData } from '../../../utils/localstorage';\r\n\r\nexport function SplashModal() {\r\n  const dispatch = useAppDispatch();\r\n  const levelIdx = useAppSelector(getLevelIdx);\r\n\r\n  return (\r\n    <StyledModalContainer>\r\n      <StyledModalHeader>\r\n        <h1>{'TRUTH TABLES'}</h1>\r\n      </StyledModalHeader>\r\n      \r\n      <StyledModalBody style={{ textAlign:'center' }}>\r\n      {levelIdx > -1 ? (\r\n        <>\r\n          <p>{'welcome back!'}</p>\r\n          <p>{'saves are work in progress and will be reset often.'}</p>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <p>{'click HOW TO PLAY to get started.'}</p>\r\n          <p>{'this game is a work in progress and will change often.'}</p>\r\n        </>\r\n      )}\r\n      </StyledModalBody>\r\n\r\n      <StyledModalFooter>\r\n        {levelIdx > -1 ? (\r\n          <>\r\n            <Button buttonType=\"special\" text={'HOW TO PLAY'} onClick={() => dispatch(setGameStatus('help'))} />\r\n            <Button buttonType=\"negative\" text={'CLEAR SAVE'} onClick={() => resetData()} />\r\n            <Button text={'CONTINUE SAVED'} onClick={() => dispatch(resumeLevel(levelIdx))} />\r\n          </>\r\n        ):(\r\n          <>\r\n            <Button buttonType=\"special\" text={'HOW TO PLAY'} onClick={() => dispatch(setGameStatus('help'))} />\r\n            <Button text={'NEW GAME'} onClick={() => dispatch(startLevel(0))} />\r\n          </>\r\n        )}\r\n      </StyledModalFooter>\r\n    </StyledModalContainer>\r\n  );\r\n}","import styled, { css } from 'styled-components';\r\nimport { useAppDispatch, useAppSelector } from '../../../app/hooks';\r\nimport { Button } from '../../../components/button';\r\nimport { selectAllLevelInfo, setGameStatus, startLevel } from '../../../app/board-slice';\r\nimport { getColor } from '../../../themes';\r\nimport { resetData } from '../../../utils/localstorage';\r\nimport { LevelInfo, RenderedMenuGroup } from '../../../types';\r\nimport { useCallback } from 'react';\r\n\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport { StyledModalBody, StyledModalContainer, StyledModalFooter, StyledModalHeader } from './basic';\r\n\r\nexport const StyledBody = styled(StyledModalBody)`\r\n  border: .75rem solid ${getColor('brown_dark')};\r\n  background-color: ${getColor('brown')};\r\n  border-radius: 2rem;\r\n\r\n  li{\r\n    list-style: none;\r\n    padding:1rem 0;\r\n    margin:0;\r\n  }\r\n`;\r\n\r\ninterface StyledLevelEntryProps {\r\n  current?: boolean,\r\n  isEven: boolean\r\n}\r\nexport const StyledLevelEntry = styled.li<StyledLevelEntryProps>`\r\n  width:100%;\r\n  border: .5rem dashed transparent;\r\n  transition: border-color .2s ease-out;\r\n\r\n  color: ${getColor('brown_light')};\r\n  ${p => p.current && css`\r\n    border-color: ${getColor('green')};\r\n  `}\r\n\r\n  ${p => p.isEven ? css`\r\n    background-color: rgba(53, 18, 14, .5);\r\n  `: css`\r\n    background-color: rgba(53, 18, 14, .3);\r\n  `}\r\n\r\n  cursor: pointer;\r\n  &:hover{\r\n    color: ${getColor('white')};\r\n    border-color: ${getColor('brown_light')};\r\n  }\r\n\r\n  display:grid;\r\n  grid-template-columns: 4rem auto 5rem;\r\n  gap: .5rem;\r\n  justify-items:middle;\r\n  align-items: middle;\r\n  justify-content: middle;\r\n\r\n  >span{\r\n    margin: auto 0;\r\n    font-size: 3rem;\r\n\r\n    &:last-child{\r\n      font-size: 2rem;\r\n    }\r\n  }\r\n`;\r\n\r\ninterface StyledCompletedProps {\r\n  completed?: boolean\r\n}\r\n\r\nexport const StyledCompleted = styled.div<StyledCompletedProps>`\r\n  width: 2.5rem;\r\n  height: 2.5rem;\r\n  margin: .25rem auto 0 auto;\r\n  border-radius: 50%;\r\n  padding: 1rem;\r\n  background-color: ${getColor('brown')};\r\n\r\n  >svg{\r\n    opacity:0;\r\n    color: ${getColor('brown_light')};\r\n    font-size:2.5rem;\r\n    margin-left:-1rem;\r\n    margin-top:-1rem;\r\n  }\r\n\r\n  ${p => p.completed && css`\r\n    >svg{\r\n      opacity:1;\r\n    }\r\n  `}\r\n`;\r\n\r\nexport const StyledGroupEntry = styled.li`\r\n  h2{\r\n    margin-left:-1rem;\r\n    color: ${getColor('brown_light')};\r\n  }\r\n\r\n  hr{\r\n    color: ${getColor('brown_light')};\r\n    background: none;\r\n    background-color: ${getColor('brown_light')};\r\n    border: 0;\r\n    height:.5rem;\r\n    margin: .5rem 0 .5rem 0;\r\n  }\r\n`;\r\n\r\ninterface LevelGroupEntryProps {\r\n  levelGroup: RenderedMenuGroup,\r\n  startLevel: Function\r\n}\r\nexport function LevelGroupEntry({levelGroup, startLevel}: LevelGroupEntryProps) {\r\n  return (\r\n    <StyledGroupEntry>\r\n      <h2>{levelGroup.title}</h2>\r\n      <hr/>\r\n      <ul>\r\n        {levelGroup.levels.map((lI, idx) => (\r\n          <LevelInfoEntry key={idx} data={lI} idx={idx} startLevel={startLevel}/>\r\n        ))}\r\n      </ul>\r\n    </StyledGroupEntry>\r\n  )\r\n}\r\n\r\ninterface LevelInfoEntryProps {\r\n  data: LevelInfo,\r\n  startLevel: Function,\r\n  idx: number\r\n}\r\nexport function LevelInfoEntry({data, idx, startLevel}: LevelInfoEntryProps) {\r\n  return (\r\n    <StyledLevelEntry current={data.current} isEven={idx % 2 === 0} onClick={() => startLevel(data.level)}>\r\n\r\n      <StyledCompleted completed={data.completed}>\r\n        <DoneIcon />\r\n      </StyledCompleted>\r\n      <span>{`${data.title}`}</span>\r\n      <span>{`(${data.layout})`}</span>\r\n    </StyledLevelEntry>\r\n  )\r\n}\r\n\r\nexport function ProgressModal() {\r\n  const dispatch = useAppDispatch();\r\n  const levelInfo = useAppSelector(selectAllLevelInfo);\r\n\r\n  const onStartLevel = useCallback((idx => {\r\n    dispatch(startLevel(idx))\r\n  }), [dispatch]);\r\n\r\n  return (\r\n    <StyledModalContainer>\r\n      <StyledModalHeader>\r\n        <h1>{'PROGRESS'}</h1>\r\n      </StyledModalHeader>\r\n      \r\n      <StyledBody>\r\n        {levelInfo.map((lI, idx) => (\r\n          <LevelGroupEntry key={idx} levelGroup={lI} startLevel={onStartLevel}/>\r\n        ))}\r\n      </StyledBody>\r\n      <StyledModalFooter>\r\n        <Button text={'CLEAR SAVE'} buttonType=\"negative\" onClick={() => resetData()} />\r\n        <Button text={'OK'} onClick={() => dispatch(setGameStatus('playing'))} />\r\n      </StyledModalFooter>\r\n    </StyledModalContainer>\r\n  );\r\n}\r\n","import styled, { css } from 'styled-components';\r\nimport { useAppDispatch, useAppSelector } from '../../../app/hooks';\r\nimport { getPrevGameStatus, setGameStatus } from '../../../app/board-slice';\r\nimport { Button } from '../../../components/button';\r\nimport { getColor } from '../../../themes';\r\nimport { StyledModalContainer, StyledModalFooter, StyledModalHeader } from './basic';\r\nimport { useMemo, useState } from 'react';\r\nimport { TUTORIAL } from '../../../app/data/data';\r\nimport NavigateNext from '@material-ui/icons/NavigateNext';\r\nimport NavigateBefore from '@material-ui/icons/NavigateBefore';\r\n\r\nconst StyledInstructions = styled.div`\r\n  grid-column: 1 / span 3;\r\n  grid-row: 2 / span 1;\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 0 3rem;\r\n  overflow-y: auto;\r\n\r\n  border: .25rem solid ${getColor('brown')};\r\n  border-left: 0;\r\n  border-right:0;\r\n  padding: 1rem;\r\n\r\n  display:grid;\r\n  grid-template-columns: 5rem auto 5rem;\r\n  grid-template-rows: auto min-content;\r\n  row-gap:1rem;\r\n`;\r\n\r\nconst StyledTutArrow = styled.div`\r\n  grid-row: 1 / span 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n\r\n  svg{\r\n    font-size: 5rem;\r\n  }\r\n\r\n  @media (hover: hover) {\r\n    &:hover{\r\n      color: white;\r\n    }\r\n  }\r\n`;\r\n\r\nconst StyledPrevTut = styled(StyledTutArrow)`\r\n  grid-column: 1 / span 1;  \r\n`\r\nconst StyledNextTut = styled(StyledTutArrow)`\r\n  grid-column: 3 / span 1;\r\n`\r\n\r\nconst StyledTutText = styled.p`\r\n  grid-row: 2 / span 1;\r\n  grid-column: 2 / span 1;\r\n  \r\n  @media (max-width: 600px) {\r\n    grid-column: 1 / span 3;\r\n  }\r\n`;\r\n\r\ninterface StyledTutorialImageProps {\r\n  imageUrl: string;\r\n}\r\nconst StyledTutorialImage = styled.div<StyledTutorialImageProps>`\r\n  grid-column: 2 / span 1;\r\n  grid-row: 1 / span 1; \r\n  background: url(${p => p.imageUrl}) no-repeat center;\r\n  background-position:center;\r\n  background-size:contain;\r\n\r\n  border: .5rem solid ${getColor('brown_dark')};\r\n  /* margin-bottom: 1rem; */\r\n`;\r\n\r\nexport function HelpModal() {\r\n  const dispatch = useAppDispatch();\r\n  const prevGameStatus = useAppSelector(getPrevGameStatus);\r\n  const [tutIdx, setTutIdx] = useState(0);\r\n\r\n  const tutData = useMemo(() => {\r\n    return TUTORIAL[tutIdx];\r\n  }, [tutIdx]);\r\n  \r\n  const tutIdxs = useMemo(() => {\r\n    return Array.from({length: TUTORIAL.length}, (x, i) => i)\r\n  }, []);\r\n\r\n  return (\r\n    <StyledModalContainer>\r\n      <StyledModalHeader>\r\n        <h1>{'HELP'}</h1>\r\n      </StyledModalHeader>\r\n      \r\n      <StyledInstructions>\r\n        <StyledTutorialImage imageUrl={tutData.image} />\r\n        <StyledTutText>{tutData.text}</StyledTutText>\r\n        {tutIdx > 0 && (\r\n          <StyledPrevTut onClick={() => setTutIdx(tutIdx - 1)}>\r\n            <NavigateBefore/>\r\n          </StyledPrevTut>\r\n        )}\r\n        {(tutIdx + 1) < tutIdxs.length && (\r\n          <StyledNextTut onClick={() => setTutIdx(tutIdx + 1)}>\r\n            <NavigateNext/>\r\n          </StyledNextTut>\r\n        )}\r\n      </StyledInstructions>\r\n      <StyledModalFooter>\r\n        <Button text={'OK'} onClick={() => dispatch(setGameStatus(prevGameStatus))} />\r\n      </StyledModalFooter>\r\n    </StyledModalContainer>\r\n  );\r\n}\r\n","import styled from 'styled-components';\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport { getColor } from '../../themes';\r\nimport { GameStatus } from '../../types';\r\nimport { getGameStatus } from '../../app/board-slice';\r\nimport { WinModal, LoseModal } from './modals/winlose';\r\nimport { DebugModal } from './modals/debug';\r\nimport { SplashModal } from './modals/splash';\r\nimport { ProgressModal } from './modals/progress';\r\nimport { HelpModal } from './modals/help';\r\n\r\nconst StyledContainer = styled.div`\r\n  position:fixed;\r\n  left:0;\r\n  top:0;\r\n  right:0;\r\n  bottom:0;\r\n  z-index:5;\r\n`;\r\n\r\nconst StyledModalBg = styled.div`\r\n  position:absolute;\r\n  left:0;\r\n  right:0;\r\n  top:0;\r\n  bottom:0;\r\n  background-color: ${getColor('brown')};\r\n  opacity: .95;\r\n  z-index:-1;\r\n`;\r\n\r\nexport const getModal = (gameStatus: GameStatus) => {\r\n  switch(gameStatus){\r\n    case 'start': return <SplashModal />\r\n    case 'roundWin': return <WinModal />\r\n    case 'invalidAnswer': return <LoseModal />\r\n    case 'help': return <HelpModal />\r\n    case 'debug': return <DebugModal />\r\n    case 'progress': return <ProgressModal />\r\n    default: return null;\r\n  }\r\n}\r\n\r\nexport function Modal() {\r\n  const gameStatus = useAppSelector(getGameStatus);\r\n  const modal = getModal(gameStatus);\r\n  if(!modal) return null;\r\n\r\n  return (\r\n    <StyledContainer>\r\n      {modal}\r\n      <StyledModalBg />\r\n    </StyledContainer>\r\n  );\r\n}\r\n","import { useAppDispatch } from '../../app/hooks';\r\nimport { getGameStatus, resetMatrix, selectLevelData } from '../../app/board-slice';\r\nimport { useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nexport function RuleMaster() {\r\n  const dispatch = useAppDispatch();\r\n  const levelData = useSelector(selectLevelData);\r\n  const gameStatus = useSelector(getGameStatus);\r\n\r\n  // eventually, should move this logic into the slice somehow\r\n  useEffect(() => {\r\n    if(levelData){\r\n      if(gameStatus === 'loading'){\r\n        dispatch(resetMatrix({ levelData }));\r\n      } else if(gameStatus === 'loadingResume'){\r\n        dispatch(resetMatrix({ levelData, resume: true }));\r\n      }\r\n    }\r\n  }, [dispatch, levelData, gameStatus]);\r\n\r\n  return null;\r\n}\r\n","import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\ntype SpeechTextProps = {\r\n  mdText: string,\r\n  onTextComplete: Function,\r\n  delay?: number\r\n}\r\n\r\nlet innerTimer: NodeJS.Timeout;\r\nlet innerText = '';\r\n\r\nexport function SpeechText({ mdText, onTextComplete, delay }: SpeechTextProps) {\r\n  const [ curText, setCurText ] = useState('');\r\n  const [ isComplete, setIsComplete ] = useState(false);\r\n  const getNextText = (partial: string, full: string) => {\r\n    return full.slice(0, partial.length + 1);\r\n  }\r\n\r\n  const cleanText = useMemo(() => {\r\n    return mdText.replaceAll('*', '');\r\n  }, [ mdText ])\r\n\r\n  const nextTextPlease = useCallback((fullText: string, reset?: boolean, delay?: number) => {\r\n    if(reset) innerText = '';\r\n    const startDelay = delay ? delay : 40;\r\n    innerTimer = setTimeout(() => {\r\n      innerText = getNextText(innerText, fullText);\r\n      setCurText(innerText);\r\n\r\n      if(innerText.length !== fullText.length){\r\n        nextTextPlease(fullText);\r\n      }else{\r\n        setIsComplete(true);\r\n      }\r\n    }, startDelay);\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setCurText('');\r\n    setIsComplete(false);\r\n    nextTextPlease(cleanText, true, delay);\r\n\r\n    return () => {\r\n      clearTimeout(innerTimer);\r\n    }\r\n  }, [ cleanText, nextTextPlease, delay ]);\r\n\r\n  useEffect(() => {\r\n    if(isComplete) onTextComplete();\r\n  }, [ isComplete, onTextComplete ]);\r\n\r\n  const displayText = useMemo(() => {\r\n    if(isComplete) return mdText;\r\n    return curText;\r\n  }, [ isComplete, curText, mdText ])\r\n  return (\r\n    <ReactMarkdown>{displayText}</ReactMarkdown>\r\n  );\r\n}\r\n","import { useCallback } from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\r\nimport { getColor } from '../../themes';\r\nimport { getActiveHintIdx, selectHints, setActiveHint } from '../../app/board-slice';\r\n\r\nconst StyledContainer = styled.div`\r\n  pointer-events: none;\r\n`;\r\n\r\nconst StyledControls = styled.ul`\r\n  text-align:center;\r\n  >div{\r\n    display:inline-block;\r\n    pointer-events: all;\r\n  }\r\n`;\r\n\r\ninterface StyledHintProps {\r\n  isActive?: boolean;\r\n};\r\n\r\nconst StyledHintHint = styled.div`\r\n  position: absolute;\r\n  bottom: 100%;\r\n  font-size: 1.5rem;\r\n  left:50%;\r\n  transform: translateX(-50%);\r\n  color: ${getColor('brown_light')};\r\n`\r\n\r\nconst StyledHint = styled.div<StyledHintProps>`\r\n  cursor: pointer;\r\n\r\n  background-color: ${getColor('brown_light')};\r\n\r\n  width: 5rem;\r\n  height: 5rem;\r\n  margin: .25rem;\r\n  border: var(--bordersize) solid ${getColor('brown')};\r\n  border-radius: 1.5rem;\r\n  transition: all .3s;\r\n\r\n  &:hover{  \r\n    width: 7rem;\r\n    height: 6rem;\r\n    background-color: ${getColor('yellow_light')};\r\n\r\n    transition: all .3s;\r\n  }\r\n\r\n  ${p => p.isActive && css`\r\n    background-color: ${getColor('yellow')};\r\n\r\n    width: 8rem;\r\n    height: 8rem;\r\n\r\n    &:hover{  \r\n      width: 9rem;\r\n      height: 9rem;\r\n      background-color: ${getColor('pink')};\r\n\r\n      transition: all .3s;\r\n    }\r\n  `}\r\n`;\r\n\r\nexport function HintPicker() {\r\n  const activeHintIdx = useAppSelector(getActiveHintIdx);\r\n  const hints = useAppSelector(selectHints);\r\n\r\n  const dispatch = useAppDispatch();\r\n  const onCloseHint = useCallback(() => {\r\n    dispatch(setActiveHint(-1));\r\n  }, [dispatch]);\r\n\r\n  const onClickHint = useCallback((hintIdx) => {\r\n    dispatch(setActiveHint(hintIdx));\r\n  }, [ dispatch ]);\r\n\r\n\r\n  return (\r\n    <StyledContainer>\r\n      <StyledControls>\r\n        {hints?.map((hint, idx) => \r\n          idx === activeHintIdx ? (\r\n            <StyledHint \r\n              key={idx}\r\n              onClick={() => onCloseHint()}\r\n              isActive={true}\r\n            />\r\n          ):(\r\n            <StyledHint \r\n              key={idx}\r\n              onClick={() => onClickHint(idx)}\r\n            />\r\n          )\r\n        )}\r\n        {activeHintIdx === -1 && <StyledHintHint>{'click the clues to solve the puzzle'}</StyledHintHint>}\r\n      </StyledControls>\r\n    </StyledContainer>\r\n  );\r\n}\r\n","import styled, { keyframes } from 'styled-components';\r\n\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport { getColor } from '../../themes';\r\nimport { checkIfSolved } from '../../app/board-slice';\r\n\r\nconst slideInFromBottom = keyframes`\r\n  0% {\r\n    transform: translateY(100%);\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    transform: translateY(0);\r\n    opacity: 1;\r\n  }\r\n`;\r\nconst fadeOut = keyframes`\r\n  0% {\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n  }\r\n`;\r\n\r\nconst StyledSolvedNotice = styled.div`\r\n  grid-column: 1 / span 2;\r\n  grid-row: 3 / span 1;\r\n  position: relative;\r\n  animation: ${fadeOut} .25s ease-out .5s;\r\n  animation-fill-mode: backwards;\r\n  opacity: 0;\r\n\r\n  div{\r\n    animation: ${slideInFromBottom} .2s cubic-bezier(.56,1.85,.74,.63) 0s 1;\r\n    position:absolute;\r\n    bottom:100%;\r\n    opacity: 1;\r\n    text-align:right;\r\n    padding: .5rem 1rem;\r\n    right: .5rem;\r\n\r\n    span{\r\n      font-size:2rem;\r\n    }\r\n  }\r\n`;\r\n\r\nconst StyledCorrectNotice = styled(StyledSolvedNotice)`\r\n  div{\r\n    /* box-shadow:0 -2px 1rem 2rem ${getColor('green')}; */\r\n    background-color: ${getColor('green')};\r\n  }\r\n`;\r\n\r\nconst StyledIncorrectNotice = styled(StyledSolvedNotice)`\r\n  div{\r\n    /* box-shadow:0 -2px 2rem 2rem ${getColor('red_light')}; */\r\n    background-color: ${getColor('red_light')};\r\n  }\r\n`;\r\n\r\nexport function SolvedNotice() {\r\n  const solvedType = useAppSelector(checkIfSolved);\r\n\r\n  switch(solvedType){\r\n    case 'incorrect': return(\r\n      <StyledIncorrectNotice>\r\n        <div>\r\n          <span>{'INVALID!'}</span>\r\n        </div>\r\n      </StyledIncorrectNotice>\r\n    );\r\n    case 'correct': return(\r\n      <StyledCorrectNotice>\r\n        <div>\r\n          <span>{'VALID!'}</span>\r\n        </div>\r\n      </StyledCorrectNotice>\r\n    );\r\n  }\r\n\r\n  return null;\r\n}\r\n","import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport styled, { css, keyframes } from 'styled-components';\r\n\r\nimport { useAppSelector } from '../../app/hooks';\r\nimport { getColor, mixinFontFamily } from '../../themes';\r\nimport { SpeechText } from '../../components/speech-text';\r\nimport { checkIfSolved, selectActiveHint, selectLevelInfo } from '../../app/board-slice';\r\nimport { HintPicker } from './hint-picker';\r\nimport { NewHintGiver } from './new-hint-giver';\r\nimport { SolvedType } from '../../types';\r\nimport { SolvedNotice } from './solved-notice';\r\n\r\nconst StyledHintGiver = styled.div`\r\n  grid-column: 1 / span 1;\r\n  grid-row: 2 / span 2;\r\n  position:relative;\r\n  z-index:1;\r\n  pointer-events:none;\r\n`;\r\ninterface StyledBannerProps {\r\n  solvedType: SolvedType;\r\n  completed?: boolean;\r\n}\r\nconst StyledBanner = styled.div<StyledBannerProps>`\r\n  grid-column: 1 / span 2;\r\n  grid-row: 3 / span 1;\r\n  padding-top:.75rem;\r\n  padding-bottom: .75rem;\r\n  padding-left: var(--leftcolsize);\r\n  z-index:1;\r\n\r\n  background-color: ${getColor('brown_light')};\r\n\r\n  ${p => p.solvedType === 'correct' && css`\r\n    /* background-color: ${getColor('green')}; */\r\n  `}\r\n  ${p => p.solvedType === 'incorrect' && css`\r\n    /* background-color: ${getColor('red_light')}; */\r\n  `}\r\n`;\r\nconst animateMarkdown = keyframes`\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\nconst StyledTextZone = styled.div`\r\n  height:100%;\r\n\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  padding: 1rem 1rem 3rem 0;\r\n\r\n  h2{\r\n    font-size: 3rem;\r\n    margin: 0;\r\n\r\n    @media (max-width: 600px) {\r\n      font-size:2rem;\r\n    }\r\n  }\r\n\r\n  hr{\r\n    border: none;\r\n    height: .25rem;\r\n    background-color: ${getColor('brown_dark')};\r\n    margin-bottom:1rem;\r\n    max-width: 90%;\r\n    opacity: .5;\r\n  }\r\n\r\n  p {\r\n    ${mixinFontFamily('speech')};\r\n    font-size:2.5rem;\r\n    line-height: 2.5rem;\r\n\r\n    @media (max-width: 600px) {\r\n      font-size:2rem;\r\n      line-height: 2rem;\r\n    }\r\n\r\n    em,strong{\r\n      animation: ${animateMarkdown} .3s ease-in;\r\n      animation-fill-mode: backwards;\r\n    }\r\n\r\n    /* markdown *emphasis* text, these are clues */\r\n    em{\r\n      margin-left:-.5rem;\r\n    }\r\n    /* markdown **strong** text, these match an attribute name */\r\n    strong{\r\n      margin-left:-.5rem;\r\n      margin-right:-.5rem;\r\n    }\r\n  }\r\n`\r\n\r\nconst StyledControls = styled.div`\r\n  position:relative;\r\n\r\n  >div{\r\n    position:absolute;\r\n    left:50%;\r\n    transform:translateX(-50%);\r\n\r\n    bottom: calc(100% - .75rem);\r\n    width:100%;\r\n  }\r\n`;\r\n\r\nexport function InfoPanel() {\r\n  const [ isTalking, setIsTalking ] = useState(true);\r\n  const hint = useAppSelector(selectActiveHint);\r\n  const solvedType = useAppSelector(checkIfSolved);\r\n  const levelInfo = useAppSelector(selectLevelInfo);\r\n\r\n\r\n  const titleText = useMemo(() => {\r\n    return `${levelInfo?.completed ? '(solved) ' : ''}Level ${(levelInfo?.level || 0) + 1}: ${levelInfo?.title}`\r\n  }, [levelInfo]);\r\n\r\n  const hintText = useMemo(() => {\r\n    return hint ? hint.text : ''\r\n  }, [ hint ]);\r\n  \r\n  const description = useMemo(() => \r\n    (levelInfo?.description || null)\r\n  , [ levelInfo ]);\r\n\r\n  useEffect(() => {\r\n    setIsTalking(true);\r\n  }, [ hint, setIsTalking ]);\r\n\r\n  const onTextComplete = useCallback(() => {\r\n    setIsTalking(false);\r\n  }, [ setIsTalking ]);\r\n\r\n  if(!description) return null;\r\n\r\n\r\n  return (\r\n    <>\r\n      <SolvedNotice />\r\n      <StyledBanner completed={levelInfo?.completed} solvedType={solvedType}>\r\n        <StyledControls>\r\n          <HintPicker />\r\n        </StyledControls>\r\n        <StyledTextZone>\r\n          <h2>{titleText}</h2>\r\n          <hr/>\r\n          {hint ? (\r\n            <SpeechText mdText={hintText} onTextComplete={onTextComplete} delay={750} />\r\n          ) : (\r\n            <SpeechText mdText={description} onTextComplete={onTextComplete} delay={500} />\r\n          )}\r\n        </StyledTextZone>\r\n      </StyledBanner>\r\n      <StyledHintGiver>\r\n        <NewHintGiver isTalking={isTalking} />\r\n      </StyledHintGiver>\r\n    </>\r\n  );\r\n}\r\n","import styled from 'styled-components';\r\nimport { getColor } from '../../themes';\r\nimport { getGameReady } from '../../app/board-slice';\r\nimport { Board } from '../board';\r\nimport { Modal } from '../modal';\r\nimport { useSelector } from 'react-redux';\r\nimport { RuleMaster } from './rulemaster';\r\nimport { InfoPanel } from '../info-panel';\r\n\r\nconst StyledContainer = styled.div`\r\n  position:absolute;\r\n  left:0;\r\n  top:0;\r\n  bottom:0;\r\n  right:0;\r\n  background-color: ${getColor('brown')};\r\n  color: ${getColor('brown_dark')};\r\n  overflow: hidden;\r\n\r\n  --leftcolsize: 27rem;\r\n  --roundedradius: 6rem;\r\n  --bordersize: .75rem;\r\n  @media (max-width: 600px) {\r\n    --leftcolsize: 17rem;\r\n    --roundedradius: 4rem;\r\n    --bordersize: .5rem;\r\n  }\r\n\r\n  display:grid;\r\n  grid-template-columns: var(--leftcolsize) auto;\r\n  grid-template-rows: auto 30% 15rem;\r\n`;\r\n\r\nconst StyledBody = styled.div`\r\n  grid-column: 1 / span 2;\r\n  grid-row: 1 / span 2;\r\n`;\r\n\r\nconst StyledWebsiteLink = styled.a`\r\n  font-size: 2rem;\r\n  color: ${getColor('brown_dark')};\r\n  position:absolute;\r\n  left:1rem;\r\n  top:0;\r\n\r\n  &:hover{\r\n    color: ${getColor('brown_light')};\r\n  }\r\n  z-index:0;\r\n`;\r\n\r\nexport function Main() {\r\n  const gameReady = useSelector(getGameReady);\r\n  \r\n  return (\r\n    <StyledContainer>\r\n      <RuleMaster />\r\n      <Modal />\r\n      <StyledBody>\r\n        {gameReady && <Board />}\r\n      </StyledBody>\r\n      <InfoPanel />\r\n      <StyledWebsiteLink href=\"https://www.thomasyancey.com\" target=\"_blank\" title=\"see some of my other stuff\">{'thomasyancey.com'}</StyledWebsiteLink>\r\n    </StyledContainer>\r\n  );\r\n}\r\n","import { HashRouter, Route, Routes } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport { Main } from './scenes/main';\r\n\r\nexport const ScStage = styled.div`\r\n  position:absolute;\r\n  left:0;\r\n  top:0;\r\n  right:0;\r\n  bottom:0;\r\n`\r\n\r\nfunction App() {\r\n  const routes = [\r\n    {\r\n      route: '/',\r\n      text: 'Main',\r\n      element: <Main/>\r\n    }\r\n  ]\r\n  \r\n  return (\r\n    <HashRouter>\r\n      <ScStage>\r\n        <Routes>\r\n          {routes.map((p, i) => (\r\n            <Route key={i} path={p.route} element={p.element} />\r\n          ))}\r\n        </Routes>\r\n      </ScStage>\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\r\nimport { loadState } from '../utils/localstorage';\r\nimport boardReducer from './board-slice';\r\nimport uiReducer from './ui-slice';\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    board: boardReducer,\r\n    ui: uiReducer\r\n  },\r\n  preloadedState: loadState()\r\n});\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppThunk<ReturnType = void> = ThunkAction<\r\n  ReturnType,\r\n  RootState,\r\n  unknown,\r\n  Action<string>\r\n>;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { store } from './app/store';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport './themes/fonts.css';\r\nimport GlobalStyle from './themes/';\r\nimport { throttle } from 'throttle-debounce';\r\nimport { saveSate } from './utils/localstorage';\r\n\r\n//pattern from https://dev.to/igorovic/simplest-way-to-persist-redux-state-to-localstorage-e67\r\n\r\nstore.subscribe(\r\n  throttle(1000, () => {\r\n    // saveSate({\r\n    //   ui: store.getState().ui,\r\n    //   // board: {\r\n    //   //   levelIdx: store.getState().board.levelIdx\r\n    //   // }\r\n    // });\r\n    saveSate(store.getState())\r\n  })\r\n);\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n      <GlobalStyle />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}